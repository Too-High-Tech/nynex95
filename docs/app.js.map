{"version":3,"sources":["node_modules/curvature/base/Bag.js","node_modules/curvature/base/Bindable.js","node_modules/curvature/base/Cache.js","node_modules/curvature/base/Config.js","node_modules/curvature/base/Dom.js","node_modules/curvature/base/Mixin.js","node_modules/curvature/base/Router.js","node_modules/curvature/base/RuleSet.js","node_modules/curvature/base/Tag.js","node_modules/curvature/base/View.js","node_modules/curvature/base/ViewList.js","app/desktop/Desktop.js","app/desktop/desktop.tmp.html","app/home/Home.js","app/home/home.tmp.html","app/icon/Icon.js","app/icon/icon.tmp.html","app/initialize.js","app/mixin/CssSwitch.js","app/mixin/Sealed.js","app/mixin/Target.js","app/mixin/ViewProcessor.js","app/task/Task.js","app/window/MenuBar.js","app/window/TitleBar.js","app/window/Window.js","app/window/menuBar.tmp.html","app/window/titleBar.tmp.html","app/window/window.tmp.html","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["Desktop","args","template","require","icons","Icon","name","icon","windows","Bag","win","meta","action","index","list","View","Home","singleton","desktop","i","s","a","ITEM_ADDED","tasks","taskName","taskType","path","task","add","Task","parent","resource","size","bits","bindTo","v","k","undefined","find","el","src","idle","event","home","instance","run","document","addEventListener","tag","querySelector","homeView","render","Window","content","CssSwitch","classes","Bindable","makeBindable","pane","resize","Object","assign","frame","Mixin","priv","Symbol","Sealed","seal","target","Target","EventTarget","dispatchEvent","removeEventListener","ViewProcessor","Array","isArray","keys","filter","key","join","taskList","silent","remove","focus","MenuBar","TitleBar","Base","init","Date","now","pos","make","x","y","z","title","progr","fill","map","titleBar","menuBar","element","tags","window","style","left","top","zIndex","onFrame","age","toFixed","CustomEvent","detail","minimized","maximized","prevZ","items","length","start","click","clientX","clientY","moved","mouse","once","mix","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","date","Math","round","toString","replace","indexOf","browser","navigator","userAgent","toLowerCase","forceRepaint","reloaders","page","location","reload","stylesheet","slice","call","querySelectorAll","link","val","getAttribute","href","forEach","setTimeout","body","offsetHeight","javascript","scripts","textScripts","script","text","srcScripts","loaded","all","onLoad","eval","newScript","createElement","async","onload","head","appendChild","port","host","server","hostname","connect","connection","onmessage","message","data","reloader","onerror","readyState","close","onclose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACplBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACr/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"docs/app.js","sourcesContent":["\nrequire.register(\"curvature/base/Bag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bag = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar toId = function toId(_int) {\n  return Number(_int).toString(36);\n};\n\nvar fromId = function fromId(id) {\n  return parseInt(id, 36);\n};\n\nvar Bag = /*#__PURE__*/function () {\n  function Bag() {\n    var changeCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n    _classCallCheck(this, Bag);\n\n    this.meta = Symbol('meta');\n    this.content = new Map();\n    this.list = _Bindable.Bindable.makeBindable({});\n    this.current = 0;\n    this.type = undefined;\n    this.changeCallback = changeCallback;\n  }\n\n  _createClass(Bag, [{\n    key: \"add\",\n    value: function add(item) {\n      if (item === undefined || !(item instanceof Object)) {\n        throw new Error('Only objects may be added to Bags.');\n      }\n\n      if (this.type && !(item instanceof this.type)) {\n        console.error(this.type, item);\n        throw new Error(\"Only objects of type \".concat(this.type, \" may be added to this Bag.\"));\n      }\n\n      if (this.content.has(item)) {\n        return;\n      }\n\n      var id = toId(this.current++);\n      this.content.set(item, id);\n      this.list[id] = item;\n\n      if (this.changeCallback) {\n        this.changeCallback(item, this.meta, Bag.ITEM_ADDED, id);\n      }\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      if (item === undefined || !(item instanceof Object)) {\n        throw new Error('Only objects may be removed from Bags.');\n      }\n\n      if (this.type && !(item instanceof this.type)) {\n        console.error(this.type, item);\n        throw new Error(\"Only objects of type \".concat(this.type, \" may be removed from this Bag.\"));\n      }\n\n      if (!this.content.has(item)) {\n        if (this.changeCallback) {\n          this.changeCallback(item, this.meta, 0, undefined);\n        }\n\n        return false;\n      }\n\n      var id = this.content.get(item);\n      delete this.list[id];\n      this.content[\"delete\"](item);\n\n      if (this.changeCallback) {\n        this.changeCallback(item, this.meta, Bag.ITEM_REMOVED, id);\n      }\n\n      return item;\n    }\n  }, {\n    key: \"items\",\n    value: function items() {\n      return Array.from(this.content.entries()).map(function (entry) {\n        return entry[0];\n      });\n    }\n  }]);\n\n  return Bag;\n}();\n\nexports.Bag = Bag;\nObject.defineProperty(Bag, 'ITEM_ADDED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: 1\n});\nObject.defineProperty(Bag, 'ITEM_REMOVED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: -1\n});\n  })();\n});","\nrequire.register(\"curvature/base/Bindable.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bindable = void 0;\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Ref = Symbol('ref');\nvar Deck = Symbol('deck');\nvar Binding = Symbol('binding');\nvar BindingAll = Symbol('bindingAll');\nvar IsBindable = Symbol('isBindable');\nvar Executing = Symbol('executing');\nvar Stack = Symbol('stack');\nvar ObjSymbol = Symbol('object');\nvar Wrapped = Symbol('wrapped');\n\nvar Bindable = /*#__PURE__*/function () {\n  function Bindable() {\n    _classCallCheck(this, Bindable);\n  }\n\n  _createClass(Bindable, null, [{\n    key: \"isBindable\",\n    value: function isBindable(object) {\n      if (!object[Binding]) {\n        return false;\n      }\n\n      return object[Binding] === Bindable;\n    }\n  }, {\n    key: \"makeBindable\",\n    value: function makeBindable(object) {\n      return this.make(object);\n    }\n  }, {\n    key: \"make\",\n    value: function make(object) {\n      var _this = this;\n\n      if (!object || !(object instanceof Object) || object[Binding] || object instanceof Node || object instanceof IntersectionObserver || Object.isSealed(object) || !Object.isExtensible(object)) {\n        return object;\n      }\n\n      if (object[Ref]) {\n        return object[Ref];\n      }\n\n      Object.defineProperty(object, Ref, {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: object\n      });\n      Object.defineProperty(object, Deck, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n      Object.defineProperty(object, Binding, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n      Object.defineProperty(object, BindingAll, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, IsBindable, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: Bindable\n      });\n      Object.defineProperty(object, Executing, {\n        enumerable: false,\n        writable: true\n      });\n      Object.defineProperty(object, Stack, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, '___before___', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, '___after___', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, Wrapped, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n\n      var bindTo = function bindTo(property) {\n        var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        var bindToAll = false;\n\n        if (property instanceof Function) {\n          options = callback || {};\n          callback = property;\n          bindToAll = true;\n        }\n\n        if (options.delay >= 0) {\n          callback = _this.wrapDelayCallback(callback, options.delay);\n        }\n\n        if (options.throttle >= 0) {\n          callback = _this.wrapThrottleCallback(callback, options.throttle);\n        }\n\n        if (options.wait >= 0) {\n          callback = _this.wrapWaitCallback(callback, options.wait);\n        }\n\n        if (options.frame) {\n          callback = _this.wrapFrameCallback(callback, options.frame);\n        }\n\n        if (options.idle) {\n          callback = _this.wrapIdleCallback(callback);\n        }\n\n        if (bindToAll) {\n          var _bindIndex = object[BindingAll].length;\n          object[BindingAll].push(callback);\n\n          for (var i in object) {\n            callback(object[i], i, object, false);\n          }\n\n          return function () {\n            delete object[BindingAll][_bindIndex];\n          };\n        }\n\n        if (!object[Binding][property]) {\n          object[Binding][property] = [];\n        }\n\n        var bindIndex = object[Binding][property].length;\n        object[Binding][property].push(callback);\n        callback(object[property], property, object, false);\n        var cleaned = false;\n        return function () {\n          if (cleaned) {\n            return;\n          }\n\n          cleaned = true;\n\n          if (!object[Binding][property]) {\n            return;\n          }\n\n          delete object[Binding][property][bindIndex];\n        };\n      };\n\n      Object.defineProperty(object, 'bindTo', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: bindTo\n      });\n\n      var ___before = function ___before(callback) {\n        var beforeIndex = object.___before___.length;\n\n        object.___before___.push(callback);\n\n        var cleaned = false;\n        return function () {\n          if (cleaned) {\n            return;\n          }\n\n          cleaned = true;\n          delete object.___before___[beforeIndex];\n        };\n      };\n\n      var ___after = function ___after(callback) {\n        var afterIndex = object.___after___.length;\n\n        object.___after___.push(callback);\n\n        var cleaned = false;\n        return function () {\n          if (cleaned) {\n            return;\n          }\n\n          cleaned = true;\n          delete object.___after___[afterIndex];\n        };\n      };\n\n      Object.defineProperty(object, 'bindChain', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: function value(path, callback) {\n          var parts = path.split('.');\n          var node = parts.shift();\n          var subParts = parts.slice(0);\n          var debind = [];\n          debind.push(object.bindTo(node, function (v, k, t, d) {\n            var rest = subParts.join('.');\n\n            if (subParts.length === 0) {\n              callback(v, k, t, d);\n              return;\n            }\n\n            if (v === undefined) {\n              v = t[k] = _this.makeBindable({});\n            }\n\n            debind = debind.concat(v.bindChain(rest, callback));\n          })); // console.log(debind);\n\n          return function () {\n            return debind.map(function (x) {\n              return x();\n            });\n          };\n        }\n      });\n      Object.defineProperty(object, '___before', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: ___before\n      });\n      Object.defineProperty(object, '___after', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: ___after\n      });\n\n      var isBound = function isBound() {\n        for (var i in object[BindingAll]) {\n          if (object[BindingAll][i]) {\n            return true;\n          }\n        }\n\n        for (var _i in object[Binding]) {\n          for (var j in object[Binding][_i]) {\n            if (object[Binding][_i][j]) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      };\n\n      Object.defineProperty(object, 'isBound', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: isBound\n      });\n\n      for (var i in object) {\n        if (object[i] && object[i] instanceof Object && !object[i] instanceof Node && !object[i] instanceof Promise) {\n          object[i] = Bindable.makeBindable(object[i]);\n        }\n      }\n\n      var set = function set(target, key, value) {\n        if (object[Deck][key] === value) {\n          return true;\n        }\n\n        if (typeof key === 'string' && key.substring(0, 3) === '___' && key.slice(-3) === '___') {\n          return true;\n        }\n\n        if (target[key] === value) {\n          return true;\n        }\n\n        if (value && value instanceof Object && !(value instanceof Node)) {\n          if (value.___isBindable___ !== Bindable) {\n            value = Bindable.makeBindable(value);\n\n            if (_this.isBindable(value)) {\n              for (var _i2 in value) {\n                if (value[_i2] && value[_i2] instanceof Object) {\n                  value[_i2] = Bindable.makeBindable(value[_i2]);\n                }\n              }\n            }\n          }\n        }\n\n        object[Deck][key] = value;\n\n        for (var _i3 in object[BindingAll]) {\n          if (!object[BindingAll][_i3]) {\n            continue;\n          }\n\n          object[BindingAll][_i3](value, key, target, false);\n        }\n\n        var stop = false;\n\n        if (key in object[Binding]) {\n          for (var _i4 in object[Binding][key]) {\n            if (!object[Binding][key]) {\n              continue;\n            }\n\n            if (!object[Binding][key][_i4]) {\n              continue;\n            }\n\n            if (object[Binding][key][_i4](value, key, target, false, target[key]) === false) {\n              stop = true;\n            }\n          }\n        }\n\n        delete object[Deck][key];\n\n        if (!stop) {\n          var descriptor = Object.getOwnPropertyDescriptor(target, key);\n          var excluded = target instanceof File && key == 'lastModifiedDate';\n\n          if (!excluded && (!descriptor || descriptor.writable) && target[key] === value) {\n            target[key] = value;\n          }\n        }\n\n        return Reflect.set(target, key, value);\n      };\n\n      var deleteProperty = function deleteProperty(target, key) {\n        if (!(key in target)) {\n          return true;\n        }\n\n        for (var _i5 in object[BindingAll]) {\n          object[BindingAll][_i5](undefined, key, target, true, target[key]);\n        }\n\n        if (key in object[Binding]) {\n          for (var _i6 in object[Binding][key]) {\n            if (!object[Binding][key][_i6]) {\n              continue;\n            }\n\n            object[Binding][key][_i6](undefined, key, target, true, target[key]);\n          }\n        }\n\n        delete target[key];\n        return true;\n      };\n\n      var get = function get(target, key) {\n        if (target[key] instanceof Function) {\n          if (target[Wrapped][key]) {\n            return target[Wrapped][key];\n          }\n\n          var descriptor = Object.getOwnPropertyDescriptor(object, key);\n\n          if (descriptor && !descriptor.configurable && !descriptor.writable) {\n            target[Wrapped][key] = target[key];\n            return target[Wrapped][key];\n          }\n\n          target[Wrapped][key] = function () {\n            target[Executing] = key;\n            target[Stack].unshift(key);\n\n            for (var _len = arguments.length, providedArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n              providedArgs[_key] = arguments[_key];\n            }\n\n            for (var _i7 in target.___before___) {\n              target.___before___[_i7](target, key, target[Stack], object, providedArgs);\n            }\n\n            var objRef = object instanceof Promise ? object : object[Ref];\n            var ret = target[key].apply(objRef, providedArgs);\n\n            for (var _i8 in target.___after___) {\n              target.___after___[_i8](target, key, target[Stack], object, providedArgs);\n            }\n\n            target[Executing] = null;\n            target[Stack].shift();\n            return ret;\n          };\n\n          return target[Wrapped][key];\n        }\n\n        if (target[key] instanceof Object) {\n          Bindable.makeBindable(target[key]);\n        }\n\n        return target[key];\n      };\n\n      var construct = function construct(target, args) {\n        var key = 'constructor';\n\n        for (var _i9 in target.___before___) {\n          target.___before___[_i9](target, key, target[Stack], undefined, args);\n        }\n\n        var instance = _construct(target, _toConsumableArray(args));\n\n        for (var _i10 in target.___after___) {\n          target.___after___[_i10](target, key, target[Stack], instance, args);\n        }\n\n        return instance;\n      };\n\n      object[Ref] = new Proxy(object, {\n        deleteProperty: deleteProperty,\n        construct: construct,\n        get: get,\n        set: set\n      });\n      return object[Ref];\n    }\n  }, {\n    key: \"clearBindings\",\n    value: function clearBindings(object) {\n      var clearObj = function clearObj(o) {\n        return Object.keys(o).map(function (k) {\n          return delete o[k];\n        });\n      };\n\n      var maps = function maps(func) {\n        return function () {\n          for (var _len2 = arguments.length, os = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            os[_key2] = arguments[_key2];\n          }\n\n          return os.map(func);\n        };\n      };\n\n      var clearObjs = maps(clearObj);\n      clearObjs(object[Ref], object[Wrapped], object[Binding], object[BindingAll], object.___after___, object.___before___); // object[BindingAll]  = [];\n      // object.___after___  = [];\n      // object.___before___ = [];\n      // object[Ref]         = {};\n      // object[Wrapped]     = {};\n      // object[Binding]     = {};\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(object, path) {\n      var owner = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      // console.log(path, object);\n      var node;\n      var pathParts = path.split('.');\n      var top = pathParts[0];\n\n      while (pathParts.length) {\n        if (owner && pathParts.length === 1) {\n          var obj = this.makeBindable(object);\n          return [obj, pathParts.shift(), top];\n        }\n\n        node = pathParts.shift();\n\n        if (!node in object || !object[node] || !(object[node] instanceof Object)) {\n          object[node] = {};\n        }\n\n        object = this.makeBindable(object[node]);\n      }\n\n      return [this.makeBindable(object), node, top];\n    }\n  }, {\n    key: \"wrapDelayCallback\",\n    value: function wrapDelayCallback(callback, delay) {\n      return function (v, k, t, d) {\n        setTimeout(function () {\n          return callback(v, k, t, d, t[k]);\n        }, delay);\n      };\n    }\n  }, {\n    key: \"wrapThrottleCallback\",\n    value: function wrapThrottleCallback(callback, throttle) {\n      return function (callback) {\n        var throttle = false;\n        return function (v, k, t, d) {\n          if (throttle) {\n            return;\n          }\n\n          callback(v, k, t, d, t[k]);\n          throttle = true;\n          setTimeout(function () {\n            throttle = false;\n          }, throttle);\n        };\n      }(callback);\n    }\n  }, {\n    key: \"wrapWaitCallback\",\n    value: function wrapWaitCallback(callback, wait) {\n      var waiter = false;\n      return function (v, k, t, d) {\n        if (waiter) {\n          clearTimeout(waiter);\n          waiter = false;\n        }\n\n        waiter = setTimeout(function () {\n          return callback(v, k, t, d, t[k]);\n        }, wait);\n      };\n    }\n  }, {\n    key: \"wrapFrameCallback\",\n    value: function wrapFrameCallback(callback, frames) {\n      return function (v, k, t, d, p) {\n        requestAnimationFrame(function () {\n          return callback(v, k, t, d, p);\n        });\n      };\n    }\n  }, {\n    key: \"wrapIdleCallback\",\n    value: function wrapIdleCallback(callback) {\n      return function (v, k, t, d, p) {\n        requestIdleCallback(function () {\n          return callback(v, k, t, d, p);\n        });\n      };\n    }\n  }]);\n\n  return Bindable;\n}();\n\nexports.Bindable = Bindable;\n  })();\n});","\nrequire.register(\"curvature/base/Cache.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Cache = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Cache = /*#__PURE__*/function () {\n  function Cache() {\n    _classCallCheck(this, Cache);\n  }\n\n  _createClass(Cache, null, [{\n    key: \"store\",\n    value: function store(key, value, expiry) {\n      var bucket = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'standard';\n      var expiration = 0;\n\n      if (expiry) {\n        expiration = expiry * 1000 + new Date().getTime();\n      } // console.log(\n      // \t`Caching ${key} until ${expiration} in ${bucket}.`\n      // \t, value\n      // \t, this.bucket\n      // );\n\n\n      if (!this.bucket) {\n        this.bucket = {};\n      }\n\n      if (!this.bucket[bucket]) {\n        this.bucket[bucket] = {};\n      }\n\n      this.bucket[bucket][key] = {\n        expiration: expiration,\n        value: value\n      };\n    }\n  }, {\n    key: \"load\",\n    value: function load(key) {\n      var defaultvalue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var bucket = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'standard';\n\n      // console.log(\n      // \t`Checking cache for ${key} in ${bucket}.`\n      // \t, this.bucket\n      // );\n      if (this.bucket && this.bucket[bucket] && this.bucket[bucket][key]) {\n        // console.log(this.bucket[bucket][key].expiration, (new Date).getTime());\n        if (this.bucket[bucket][key].expiration == 0 || this.bucket[bucket][key].expiration > new Date().getTime()) {\n          return this.bucket[bucket][key].value;\n        }\n      }\n\n      return defaultvalue;\n    }\n  }]);\n\n  return Cache;\n}();\n\nexports.Cache = Cache;\n  })();\n});","\nrequire.register(\"curvature/base/Config.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Config = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ConfigData = {};\n\ntry {\n  var AppConfig = require('Config').Config || {};\n  Object.assign(ConfigData, AppConfig);\n} catch (error) {\n  console.warn(error);\n}\n\nvar Config = /*#__PURE__*/function () {\n  function Config() {\n    _classCallCheck(this, Config);\n  }\n\n  _createClass(Config, null, [{\n    key: \"get\",\n    value: function get(name) {\n      return this.data[name];\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.data[name] = value;\n      return this;\n    }\n  }, {\n    key: \"dump\",\n    value: function dump() {\n      return this.data;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      for (var _len = arguments.length, configBlobs = new Array(_len), _key = 0; _key < _len; _key++) {\n        configBlobs[_key] = arguments[_key];\n      }\n\n      for (var i in configBlobs) {\n        var configBlob = configBlobs[i];\n\n        if (typeof configBlob === 'string') {\n          configBlob = JSON.parse(configBlob);\n        }\n\n        for (var name in configBlob) {\n          var value = configBlob[name];\n          return this.data[name] = value;\n        }\n      }\n\n      return this;\n    }\n  }]);\n\n  return Config;\n}();\n\nexports.Config = Config;\nConfig.data = ConfigData || {};\n  })();\n});","\nrequire.register(\"curvature/base/Dom.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dom = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar traversals = 0;\n\nvar Dom = /*#__PURE__*/function () {\n  function Dom() {\n    _classCallCheck(this, Dom);\n  }\n\n  _createClass(Dom, null, [{\n    key: \"mapTags\",\n    value: function mapTags(doc, selector, callback, startNode, endNode) {\n      var result = [];\n      var started = true;\n\n      if (startNode) {\n        started = false;\n      }\n\n      var ended = false;\n      var treeWalker = document.createTreeWalker(doc, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, {\n        acceptNode: function acceptNode(node, walker) {\n          if (!started) {\n            if (node === startNode) {\n              started = true;\n            } else {\n              return NodeFilter.FILTER_SKIP;\n            }\n          }\n\n          if (endNode && node === endNode) {\n            ended = true;\n          }\n\n          if (ended) {\n            return NodeFilter.FILTER_SKIP;\n          }\n\n          if (selector) {\n            if (node instanceof Element) {\n              if (node.matches(selector)) {\n                return NodeFilter.FILTER_ACCEPT;\n              }\n            }\n\n            return NodeFilter.FILTER_SKIP;\n          }\n\n          return NodeFilter.FILTER_ACCEPT;\n        }\n      }, false);\n      var traversal = traversals++;\n\n      while (treeWalker.nextNode()) {\n        result.push(callback(treeWalker.currentNode, treeWalker));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(doc, event) {\n      doc.dispatchEvent(event);\n      Dom.mapTags(doc, false, function (node) {\n        node.dispatchEvent(event);\n      });\n    }\n  }]);\n\n  return Dom;\n}();\n\nexports.Dom = Dom;\n  })();\n});","\nrequire.register(\"curvature/base/Mixin.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mixin = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Mixin = /*#__PURE__*/function () {\n  function Mixin() {\n    _classCallCheck(this, Mixin);\n  }\n\n  _createClass(Mixin, null, [{\n    key: \"mix\",\n    value: function mix(mixinTo) {\n      var constructors = [];\n      var allStatic = {};\n      var allInstance = {};\n\n      var mixable = _Bindable.Bindable.makeBindable(mixinTo);\n\n      var _loop = function _loop(base) {\n        var instanceNames = Object.getOwnPropertyNames(base.prototype);\n        var staticNames = Object.getOwnPropertyNames(base);\n        var prefix = /^(before|after)__(.+)/;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          var _loop3 = function _loop3() {\n            var methodName = _step.value;\n            var match = methodName.match(prefix);\n\n            if (match) {\n              switch (match[1]) {\n                case 'before':\n                  mixable.___before(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n\n                case 'after':\n                  mixable.___after(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n              }\n\n              return \"continue\";\n            }\n\n            if (allStatic[methodName]) {\n              return \"continue\";\n            }\n\n            if (typeof base[methodName] !== 'function') {\n              return \"continue\";\n            }\n\n            allStatic[methodName] = base[methodName];\n          };\n\n          for (var _iterator = staticNames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _ret = _loop3();\n\n            if (_ret === \"continue\") continue;\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          var _loop4 = function _loop4() {\n            var methodName = _step2.value;\n            var match = methodName.match(prefix);\n\n            if (match) {\n              switch (match[1]) {\n                case 'before':\n                  mixable.___before(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base.prototype[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n\n                case 'after':\n                  mixable.___after(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n\n                    var method = base.prototype[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n\n                  break;\n              }\n\n              return \"continue\";\n            }\n\n            if (allInstance[methodName]) {\n              return \"continue\";\n            }\n\n            if (typeof base.prototype[methodName] !== 'function') {\n              return \"continue\";\n            }\n\n            allInstance[methodName] = base.prototype[methodName];\n          };\n\n          for (var _iterator2 = instanceNames[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var _ret2 = _loop4();\n\n            if (_ret2 === \"continue\") continue;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      };\n\n      for (var base = this; base && base.prototype; base = Object.getPrototypeOf(base)) {\n        _loop(base);\n      }\n\n      for (var methodName in allStatic) {\n        mixinTo[methodName] = allStatic[methodName].bind(mixinTo);\n      }\n\n      var _loop2 = function _loop2(_methodName) {\n        mixinTo.prototype[_methodName] = function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return allInstance[_methodName].apply(this, args);\n        };\n      };\n\n      for (var _methodName in allInstance) {\n        _loop2(_methodName);\n      }\n\n      return mixable;\n    }\n  }]);\n\n  return Mixin;\n}();\n\nexports.Mixin = Mixin;\n  })();\n});","\nrequire.register(\"curvature/base/Router.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Router = void 0;\n\nvar _View = require(\"./View\");\n\nvar _Cache = require(\"./Cache\");\n\nvar _Config = require(\"./Config\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Router = /*#__PURE__*/function () {\n  function Router() {\n    _classCallCheck(this, Router);\n  }\n\n  _createClass(Router, null, [{\n    key: \"wait\",\n    value: function wait(view) {\n      var _this = this;\n\n      var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'DOMContentLoaded';\n      var node = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document;\n      node.addEventListener(event, function () {\n        _this.listen(view);\n      });\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(mainView) {\n      var _this2 = this;\n\n      var routeHistory = [location.toString()];\n      var prevHistoryLength = history.length;\n      var route = location.pathname + location.search;\n\n      if (location.hash) {\n        route += location.hash;\n      }\n\n      Object.assign(Router.query, Router.queryOver({}));\n      window.addEventListener('popstate', function (event) {\n        event.preventDefault();\n\n        if (routeHistory.length && prevHistoryLength == history.length) {\n          if (location.toString() == routeHistory[routeHistory.length - 2]) {\n            routeHistory.pop();\n          } else {\n            routeHistory.push(location.toString());\n          }\n        } else {\n          routeHistory.push(location.toString());\n          prevHistoryLength = history.length;\n        }\n\n        _this2.match(location.pathname, mainView);\n\n        for (var i in _this2.query) {\n          delete _this2.query[i];\n        }\n\n        Object.assign(Router.query, Router.queryOver({}));\n      });\n      this.go(route);\n    }\n  }, {\n    key: \"go\",\n    value: function go(route, silent) {\n      var _this3 = this;\n\n      var configTitle = _Config.Config.get('title');\n\n      if (configTitle) {\n        document.title = configTitle;\n      }\n\n      setTimeout(function () {\n        if (silent === 2) {\n          history.replaceState(null, null, route);\n        } else {\n          history.pushState(null, null, route);\n        }\n\n        if (!silent) {\n          if (silent === false) {\n            _this3.path = null;\n          }\n\n          window.dispatchEvent(new Event('popstate'));\n\n          if (route.substring(0, 1) === '#') {\n            window.dispatchEvent(new HashChangeEvent('hashchange'));\n          }\n        }\n\n        for (var i in _this3.query) {\n          delete _this3.query[i];\n        }\n\n        Object.assign(Router.query, Router.queryOver({}));\n      }, 0);\n    }\n  }, {\n    key: \"match\",\n    value: function match(path, view) {\n      var _this4 = this;\n\n      var forceRefresh = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (this.path === path && !forceRefresh) {\n        return;\n      }\n\n      var eventStart = new CustomEvent('cvRouteStart', {\n        cancelable: true,\n        detail: {\n          result: result,\n          path: path,\n          view: view\n        }\n      });\n      var current = view.args.content;\n      var routes = view.routes;\n      this.path = path; // this.query  = {};\n\n      for (var i in this.query) {\n        delete this.query[i];\n      }\n\n      var query = new URLSearchParams(location.search);\n      this.queryString = location.search;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = query[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pair = _step.value;\n          this.query[pair[0]] = pair[1];\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var args = {},\n          selected = false,\n          result = '';\n      path = path.substr(1).split('/');\n\n      for (var _i in this.query) {\n        args[_i] = this.query[_i];\n      }\n\n      L1: for (var _i2 in routes) {\n        var route = _i2.split('/');\n\n        if (route.length < path.length && route[route.length - 1] !== '*') {\n          continue;\n        }\n\n        L2: for (var j in route) {\n          if (route[j].substr(0, 1) == '%') {\n            var argName = null;\n            var groups = /^%(\\w+)\\??/.exec(route[j]);\n\n            if (groups && groups[1]) {\n              argName = groups[1];\n            }\n\n            if (!argName) {\n              throw new Error(\"\".concat(route[j], \" is not a valid argument segment in route \\\"\").concat(_i2, \"\\\"\"));\n            }\n\n            if (!path[j]) {\n              if (route[j].substr(route[j].length - 1, 1) == '?') {\n                args[argName] = '';\n              } else {\n                continue L1;\n              }\n            } else {\n              args[argName] = path[j];\n            }\n          } else if (route[j] !== '*' && path[j] !== route[j]) {\n            continue L1;\n          }\n        }\n\n        if (!forceRefresh && current && routes[_i2] instanceof Object && current instanceof routes[_i2] && !(routes[_i2] instanceof Promise) && current.update(args)) {\n          view.args.content = current;\n          return true;\n        }\n\n        selected = _i2;\n        result = routes[_i2];\n\n        if (route[route.length - 1] === '*') {\n          args.pathparts = path.slice(route.length - 1);\n        }\n\n        break;\n      }\n\n      document.dispatchEvent(eventStart);\n\n      if (selected in routes && routes[selected] instanceof Object && routes[selected].isView && routes[selected].isView()) {\n        result = new routes[selected](args);\n\n        result.root = function () {\n          return view;\n        };\n      } else if (routes[selected] instanceof Function) {\n        result = '';\n\n        var _result = routes[selected](args);\n\n        if (_result instanceof Promise) {\n          result = false;\n\n          _result.then(function (x) {\n            _this4.update(view, path, x);\n          })[\"catch\"](function (x) {\n            _this4.update(view, path, x);\n          });\n        } else {\n          result = _result;\n        }\n      } else if (routes[selected] instanceof Promise) {\n        result = false;\n        routes[selected].then(function (x) {\n          _this4.update(view, path, x);\n        })[\"catch\"](function (x) {\n          _this4.update(view, path, x);\n        });\n      } else if (routes[selected] instanceof Object) {\n        result = new routes[selected](args);\n      } else if (typeof routes[selected] == 'string') {\n        result = routes[selected];\n      }\n\n      this.update(view, path, result); // if(view.args.content instanceof View)\n      // {\n      // \t// view.args.content.pause(true);\n      // \tview.args.content.remove();\n      // }\n      // if(result !== false)\n      // {\n      // \tif(document.dispatchEvent(event))\n      // \t{\n      // \t\tview.args.content = result;\n      // \t}\n      // }\n\n      if (result instanceof _View.View) {\n        result.pause(false);\n        result.update(args, forceRefresh);\n      }\n\n      return selected !== false;\n    }\n  }, {\n    key: \"update\",\n    value: function update(view, path, result) {\n      var event = new CustomEvent('cvRoute', {\n        cancelable: true,\n        detail: {\n          result: result,\n          path: path,\n          view: view\n        }\n      });\n      var eventEnd = new CustomEvent('cvRouteEnd', {\n        cancelable: true,\n        detail: {\n          result: result,\n          path: path,\n          view: view\n        }\n      });\n\n      if (result !== false) {\n        if (view.args.content instanceof _View.View) {\n          // view.args.content.pause(true);\n          view.args.content.remove();\n        }\n\n        if (document.dispatchEvent(event)) {\n          view.args.content = result;\n        }\n\n        document.dispatchEvent(eventEnd);\n      }\n    }\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {// this.cache = {};\n    }\n  }, {\n    key: \"queryOver\",\n    value: function queryOver() {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var params = new URLSearchParams(location.search);\n      var finalArgs = {};\n      var query = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = params[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var pair = _step2.value;\n          query[pair[0]] = pair[1];\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      for (var i in query) {\n        finalArgs[i] = query[i];\n      }\n\n      for (var _i3 in args) {\n        finalArgs[_i3] = args[_i3];\n      }\n\n      delete finalArgs['api'];\n      return finalArgs;\n    }\n  }, {\n    key: \"queryToString\",\n    value: function queryToString() {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var fresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var parts = [],\n          finalArgs = args;\n\n      if (!fresh) {\n        finalArgs = this.queryOver(args);\n      }\n\n      for (var i in finalArgs) {\n        if (finalArgs[i] === '') {\n          continue;\n        }\n\n        parts.push(i + '=' + encodeURIComponent(finalArgs[i]));\n      }\n\n      return parts.join('&');\n    }\n  }, {\n    key: \"setQuery\",\n    value: function setQuery(name, value, silent) {\n      var args = this.queryOver();\n      args[name] = value;\n\n      if (value === undefined) {\n        delete args[name];\n      }\n\n      var queryString = this.queryToString(args, true);\n      this.go(location.pathname + (queryString ? '?' + queryString : ''), silent);\n    }\n  }]);\n\n  return Router;\n}();\n\nexports.Router = Router;\nObject.defineProperty(Router, 'query', {\n  configurable: false,\n  writeable: false,\n  value: {}\n});\n  })();\n});","\nrequire.register(\"curvature/base/RuleSet.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RuleSet = void 0;\n\nvar _Dom = require(\"./Dom\");\n\nvar _Tag = require(\"./Tag\");\n\nvar _View = require(\"./View\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar RuleSet = /*#__PURE__*/function () {\n  function RuleSet() {\n    _classCallCheck(this, RuleSet);\n  }\n\n  _createClass(RuleSet, [{\n    key: \"add\",\n    value: function add(selector, callback) {\n      this.rules = this.rules || {};\n      this.rules[selector] = this.rules[selector] || [];\n      this.rules[selector].push(callback);\n      return this;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply() {\n      var doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      var view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      RuleSet.apply(doc, view);\n\n      for (var selector in this.rules) {\n        for (var i in this.rules[selector]) {\n          var callback = this.rules[selector][i];\n          var wrapped = RuleSet.wrap(doc, callback, view);\n          var nodes = doc.querySelectorAll(selector);\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var node = _step.value;\n              wrapped(node);\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                _iterator[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        }\n      }\n    }\n  }], [{\n    key: \"add\",\n    value: function add(selector, callback) {\n      this.globalRules = this.globalRules || {};\n      this.globalRules[selector] = this.globalRules[selector] || [];\n      this.globalRules[selector].push(callback);\n      return this;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply() {\n      var doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      var view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      for (var selector in this.globalRules) {\n        for (var i in this.globalRules[selector]) {\n          var callback = this.globalRules[selector][i];\n          var wrapped = this.wrap(doc, callback, view);\n          var nodes = doc.querySelectorAll(selector);\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = nodes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var node = _step2.value;\n              wrapped(node);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"wait\",\n    value: function wait() {\n      var _this = this;\n\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'DOMContentLoaded';\n      var node = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n      var listener = function (event, node) {\n        return function () {\n          node.removeEventListener(event, listener);\n          return _this.apply();\n        };\n      }(event, node);\n\n      node.addEventListener(event, listener);\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(doc, callback) {\n      var view = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      if (callback instanceof _View.View || callback && callback.prototype && callback.prototype instanceof _View.View) {\n        callback = function (callback) {\n          return function () {\n            return callback;\n          };\n        }(callback);\n      }\n\n      return function (element) {\n        if (typeof element.___cvApplied___ === 'undefined') {\n          Object.defineProperty(element, '___cvApplied___', {\n            enumerable: false,\n            writable: false,\n            value: []\n          });\n        }\n\n        for (var i in element.___cvApplied___) {\n          if (callback == element.___cvApplied___[i]) {\n            return;\n          }\n        }\n\n        var direct, parentView;\n\n        if (view) {\n          direct = parentView = view;\n\n          if (view.viewList) {\n            parentView = view.viewList.parent;\n          }\n        }\n\n        var tag = new _Tag.Tag(element, parentView, null, undefined, direct);\n        var parent = tag.element.parentNode;\n        var sibling = tag.element.nextSibling;\n        var result = callback(tag);\n\n        if (result !== false) {\n          element.___cvApplied___.push(callback);\n        }\n\n        if (result instanceof HTMLElement) {\n          result = new _Tag.Tag(result);\n        }\n\n        if (result instanceof _Tag.Tag) {\n          if (!result.element.contains(tag.element)) {\n            while (tag.element.firstChild) {\n              result.element.appendChild(tag.element.firstChild);\n            }\n\n            tag.remove();\n          }\n\n          if (sibling) {\n            parent.insertBefore(result.element, sibling);\n          } else {\n            parent.appendChild(result.element);\n          }\n        }\n\n        if (result && result.prototype && result.prototype instanceof _View.View) {\n          result = new result();\n        }\n\n        if (result instanceof _View.View) {\n          if (view) {\n            view.cleanup.push(function (r) {\n              return function () {\n                r.remove();\n              };\n            }(result));\n            result.parent = view;\n            view.cleanup.push(view.args.bindTo(function (v, k, t) {\n              t[k] = v;\n              result.args[k] = v;\n            }));\n            view.cleanup.push(result.args.bindTo(function (v, k, t, d) {\n              t[k] = v;\n              view.args[k] = v;\n            }));\n          }\n\n          tag.clear();\n          result.render(tag.element);\n        }\n      };\n    }\n  }]);\n\n  return RuleSet;\n}();\n\nexports.RuleSet = RuleSet;\n  })();\n});","\nrequire.register(\"curvature/base/Tag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tag = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Tag = /*#__PURE__*/function () {\n  function Tag(element, parent, ref, index, direct) {\n    _classCallCheck(this, Tag);\n\n    this.element = _Bindable.Bindable.makeBindable(element);\n    this.parent = parent;\n    this.direct = direct;\n    this.ref = ref;\n    this.index = index;\n    this.cleanup = [];\n    this.proxy = _Bindable.Bindable.makeBindable(this); // this.detachListener = (event) => {\n    // \treturn;\n    // \tif(event.target != this.element)\n    // \t{\n    // \t\treturn;\n    // \t}\n    // \tif(event.path[event.path.length -1] !== window)\n    // \t{\n    // \t\treturn;\n    // \t}\n    // \tthis.element.removeEventListener('cvDomDetached', this.detachListener);\n    // \tthis.remove();\n    // };\n    // this.element.addEventListener('cvDomDetached', this.detachListener);\n    // return this.proxy;\n  }\n\n  _createClass(Tag, [{\n    key: \"remove\",\n    value: function remove() {\n      _Bindable.Bindable.clearBindings(this);\n\n      var cleanup;\n\n      while (cleanup = this.cleanup.shift()) {\n        cleanup();\n      }\n\n      this.clear();\n\n      if (!this.element) {\n        return;\n      }\n\n      var detachEvent = new Event('cvDomDetached');\n      this.element.dispatchEvent(detachEvent);\n      this.element.remove();\n      this.element = this.ref = this.parent = null;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.element) {\n        return;\n      }\n\n      var detachEvent = new Event('cvDomDetached');\n\n      while (this.element.firstChild) {\n        this.element.firstChild.dispatchEvent(detachEvent);\n        this.element.removeChild(this.element.firstChild);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    }\n  }]);\n\n  return Tag;\n}();\n\nexports.Tag = Tag;\n  })();\n});","\nrequire.register(\"curvature/base/View.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.View = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nvar _ViewList = require(\"./ViewList\");\n\nvar _Router = require(\"./Router\");\n\nvar _Dom = require(\"./Dom\");\n\nvar _Tag = require(\"./Tag\");\n\nvar _Bag = require(\"./Bag\");\n\nvar _RuleSet = require(\"./RuleSet\");\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar dontParse = Symbol('dontParse');\nvar moveIndex = 0;\n\nvar View = /*#__PURE__*/function () {\n  _createClass(View, [{\n    key: \"_id\",\n    get: function get() {\n      if (!this.__id) {\n        Object.defineProperty(this, '__id', {\n          configurable: false,\n          writable: false,\n          value: this.uuid()\n        });\n      }\n\n      return this.__id;\n    }\n  }]);\n\n  function View() {\n    var _this2 = this;\n\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var mainView = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, View);\n\n    Object.defineProperty(this, '___VIEW___', {\n      enumerable: false,\n      writable: true\n    });\n    this.___VIEW___ = View;\n    Object.defineProperty(this, 'args', {\n      configurable: false,\n      writable: false,\n      value: _Bindable.Bindable.makeBindable(args)\n    });\n\n    var _this = this;\n\n    if (!this.args._id) {\n      Object.defineProperty(this.args, '_id', {\n        configurable: false,\n        get: function get() {\n          return _this._id;\n        }\n      });\n    }\n\n    this.template = \"\";\n    this.document = \"\";\n    this.firstNode = null;\n    this.lastNode = null;\n    this.nodes = null;\n    this.cleanup = [];\n    this._onRemove = new _Bag.Bag(function (i, s, a) {// console.log('View _onRemove', i, s, a);\n    });\n    this.attach = new _Bag.Bag(function (i, s, a) {});\n    this.detach = new _Bag.Bag(function (i, s, a) {});\n    this.eventCleanup = [];\n    this.mainView = null;\n    this.parent = mainView;\n    this.viewList = null;\n    this.viewLists = {};\n    this.withViews = {};\n    this.tags = _Bindable.Bindable.makeBindable({});\n    this.intervals = [];\n    this.timeouts = [];\n    this.frames = [];\n    this.ruleSet = new _RuleSet.RuleSet();\n    this.preRuleSet = new _RuleSet.RuleSet();\n    this.subBindings = {};\n    this.subTemplates = {};\n    this.removed = false;\n    this.preserve = false;\n    this.interpolateRegex = /(\\[\\[((?:\\$+)?[\\w\\.\\|]+)\\]\\])/g;\n    this.rendered = new Promise(function (accept, reject) {\n      Object.defineProperty(_this2, 'renderComplete', {\n        configurable: false,\n        writable: false,\n        value: accept\n      });\n    });\n    return _Bindable.Bindable.make(this);\n  }\n\n  _createClass(View, [{\n    key: \"onFrame\",\n    value: function onFrame(callback) {\n      var _this3 = this;\n\n      var stopped = false;\n\n      var cancel = function cancel() {\n        stopped = true;\n      };\n\n      var c = function c(timestamp) {\n        if (_this3.removed || stopped) {\n          return;\n        }\n\n        callback(Date.now());\n        requestAnimationFrame(c);\n      };\n\n      requestAnimationFrame(function () {\n        return c(Date.now());\n      });\n      return cancel;\n    }\n  }, {\n    key: \"onNextFrame\",\n    value: function onNextFrame(callback) {\n      return requestAnimationFrame(function () {\n        return callback(Date.now());\n      });\n    }\n  }, {\n    key: \"onIdle\",\n    value: function onIdle(callback) {\n      return requestIdleCallback(function () {\n        return callback(Date.now());\n      });\n    }\n  }, {\n    key: \"onTimeout\",\n    value: function onTimeout(time, callback) {\n      var _this4 = this;\n\n      var wrappedCallback = function wrappedCallback() {\n        _this4.timeouts[index].fired = true;\n        _this4.timeouts[index].callback = null;\n        callback();\n      };\n\n      var timeout = setTimeout(wrappedCallback, time);\n      var index = this.timeouts.length;\n      this.timeouts.push({\n        timeout: timeout,\n        callback: wrappedCallback,\n        time: time,\n        fired: false,\n        created: new Date().getTime(),\n        paused: false\n      });\n      return timeout;\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (timeout) {\n      for (var i in this.timeouts) {\n        if (timeout === this.timeouts[i].timeout) {\n          clearTimeout(this.timeouts[i].timeout);\n          delete this.timeouts[i];\n        }\n      }\n    })\n  }, {\n    key: \"onInterval\",\n    value: function onInterval(time, callback) {\n      var timeout = setInterval(callback, time);\n      this.intervals.push({\n        timeout: timeout,\n        callback: callback,\n        time: time,\n        paused: false\n      });\n      return timeout;\n    }\n  }, {\n    key: \"clearInterval\",\n    value: function (_clearInterval) {\n      function clearInterval(_x2) {\n        return _clearInterval.apply(this, arguments);\n      }\n\n      clearInterval.toString = function () {\n        return _clearInterval.toString();\n      };\n\n      return clearInterval;\n    }(function (timeout) {\n      for (var i in this.intervals) {\n        if (timeout === this.intervals[i].timeout) {\n          clearInterval(this.intervals[i].timeout);\n          delete this.intervals[i];\n        }\n      }\n    })\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n      if (paused === undefined) {\n        this.paused = !this.paused;\n      }\n\n      this.paused = paused;\n\n      if (this.paused) {\n        for (var i in this.timeouts) {\n          if (this.timeouts[i].fired) {\n            delete this.timeouts[i];\n            continue;\n          }\n\n          clearTimeout(this.timeouts[i].timeout);\n        }\n\n        for (var _i in this.intervals) {\n          clearInterval(this.intervals[_i].timeout);\n        }\n      } else {\n        for (var _i2 in this.timeouts) {\n          if (!this.timeouts[_i2].timeout.paused) {\n            continue;\n          }\n\n          if (this.timeouts[_i2].fired) {\n            delete this.timeouts[_i2];\n            continue;\n          }\n\n          this.timeouts[_i2].timeout = setTimeout(this.timeouts[_i2].callback, this.timeouts[_i2].time);\n        }\n\n        for (var _i3 in this.intervals) {\n          if (!this.intervals[_i3].timeout.paused) {\n            continue;\n          }\n\n          this.intervals[_i3].timeout.paused = false;\n          this.intervals[_i3].timeout = setInterval(this.intervals[_i3].callback, this.intervals[_i3].time);\n        }\n      }\n\n      for (var _i4 in this.viewLists) {\n        if (!this.viewLists[_i4]) {\n          return;\n        }\n\n        this.viewLists[_i4].pause(!!paused);\n      }\n\n      for (var _i5 in this.tags) {\n        if (Array.isArray(this.tags[_i5])) {\n          for (var j in this.tags[_i5]) {\n            this.tags[_i5][j].pause(!!paused);\n          }\n\n          continue;\n        }\n\n        this.tags[_i5].pause(!!paused);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$nodes;\n\n      var parentNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var insertPoint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      var ref = _Bindable.Bindable.make(this);\n\n      if (parentNode instanceof View) {\n        parentNode = parentNode.firstNode.parentNode;\n      }\n\n      if (insertPoint instanceof View) {\n        insertPoint = insertPoint.firstNode;\n      }\n\n      if (this.firstNode) {\n        return this.reRender(parentNode, insertPoint);\n      }\n\n      var templateParsed = this.template instanceof DocumentFragment ? this.template.cloneNode(true) : View.templates.has(this.template);\n      var subDoc = templateParsed ? this.template instanceof DocumentFragment ? templateParsed : View.templates.get(this.template).cloneNode(true) : document.createRange().createContextualFragment(this.template);\n\n      if (!templateParsed && !(this.template instanceof DocumentFragment)) {\n        View.templates.set(this.template, subDoc.cloneNode(true));\n      }\n\n      this.mainView || this.preRuleSet.apply(subDoc, this);\n      this.mapTags(subDoc);\n      this.mainView || this.ruleSet.apply(subDoc, this);\n      this.nodes = [];\n\n      if (window['devmode'] === true) {\n        this.firstNode = document.createComment(\"Template \".concat(this._id, \" Start\"));\n        this.lastNode = document.createComment(\"Template \".concat(this._id, \" End\"));\n      } else {\n        this.firstNode = document.createTextNode('');\n        this.lastNode = document.createTextNode('');\n      }\n\n      (_this$nodes = this.nodes).push.apply(_this$nodes, [this.firstNode].concat(_toConsumableArray(Array.from(subDoc.childNodes)), [this.lastNode]));\n\n      if (parentNode) {\n        var rootNode = parentNode.getRootNode();\n        var toRoot = false;\n        var moveType = 'internal';\n\n        if (rootNode === document) {\n          toRoot = true;\n          moveType = 'external';\n        }\n\n        if (insertPoint) {\n          parentNode.insertBefore(this.firstNode, insertPoint);\n          parentNode.insertBefore(this.lastNode, insertPoint);\n        } else {\n          parentNode.appendChild(this.firstNode);\n          parentNode.appendChild(this.lastNode);\n        }\n\n        parentNode.insertBefore(subDoc, this.lastNode);\n        moveIndex++;\n\n        if (toRoot) {\n          ref.attached(rootNode, parentNode);\n          var attach = this.attach.items();\n\n          for (var i in attach) {\n            attach[i](rootNode, parentNode);\n          }\n\n          this.nodes.filter(function (n) {\n            return n.nodeType !== Node.COMMENT_NODE;\n          }).map(function (child) {\n            child.dispatchEvent(new Event('cvDomAttached', {\n              bubbles: true,\n              target: child\n            }));\n          });\n        }\n      }\n\n      this.renderComplete(this.nodes);\n      this.postRender(parentNode);\n      return this.nodes;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender(parentNode, insertPoint) {\n      var subDoc = new DocumentFragment();\n\n      if (this.firstNode.getRootNode() === document) {\n        var detach = this.detach.items();\n\n        for (var i in detach) {\n          detach[i]();\n        }\n\n        this.nodes.filter(function (n) {\n          return n.nodeType === Node.ELEMENT_NODE;\n        }).map(function (child) {\n          child.dispatchEvent(new Event('cvDomDetached', {\n            bubbles: true,\n            target: child\n          }));\n        });\n      }\n\n      subDoc.append.apply(subDoc, _toConsumableArray(this.nodes)); // subDoc.appendChild(this.firstNode);\n      // subDoc.appendChild(this.lastNode);\n\n      if (parentNode) {\n        if (insertPoint) {\n          parentNode.insertBefore(this.firstNode, insertPoint);\n          parentNode.insertBefore(this.lastNode, insertPoint);\n        } else {\n          parentNode.appendChild(this.firstNode);\n          parentNode.appendChild(this.lastNode);\n        }\n\n        parentNode.insertBefore(subDoc, this.lastNode);\n        var rootNode = parentNode.getRootNode();\n\n        if (rootNode === document) {\n          this.nodes.filter(function (n) {\n            return n.nodeType === Node.ELEMENT_NODE;\n          }).map(function (child) {\n            child.dispatchEvent(new Event('cvDomAttached', {\n              bubbles: true,\n              target: child\n            }));\n          });\n          var attach = this.attach.items();\n\n          for (var _i6 in attach) {\n            attach[_i6](rootNode, parentNode);\n          }\n        }\n      }\n\n      return this.nodes;\n    }\n  }, {\n    key: \"mapTags\",\n    value: function mapTags(subDoc) {\n      var _this5 = this;\n\n      _Dom.Dom.mapTags(subDoc, false, function (tag, walker) {\n        if (tag[dontParse]) {\n          return;\n        }\n\n        if (tag.matches) {\n          tag = _this5.mapInterpolatableTag(tag);\n          tag = tag.matches('[cv-template]') && _this5.mapTemplateTag(tag) || tag;\n          tag = tag.matches('[cv-slot]') && _this5.mapSlotTag(tag) || tag;\n          tag = tag.matches('[cv-prerender]') && _this5.mapPrendererTag(tag) || tag;\n          tag = tag.matches('[cv-link]') && _this5.mapLinkTag(tag) || tag;\n          tag = tag.matches('[cv-attr]') && _this5.mapAttrTag(tag) || tag;\n          tag = tag.matches('[cv-expand]') && _this5.mapExpandableTag(tag) || tag;\n          tag = tag.matches('[cv-ref]') && _this5.mapRefTag(tag) || tag;\n          tag = tag.matches('[cv-on]') && _this5.mapOnTag(tag) || tag;\n          tag = tag.matches('[cv-each]') && _this5.mapEachTag(tag) || tag;\n          tag = tag.matches('[cv-bind]') && _this5.mapBindTag(tag) || tag;\n          tag = tag.matches('[cv-if]') && _this5.mapIfTag(tag) || tag;\n          tag = tag.matches('[cv-with]') && _this5.mapWithTag(tag) || tag;\n        } else {\n          tag = _this5.mapInterpolatableTag(tag);\n        }\n\n        if (tag !== walker.currentNode) {\n          walker.currentNode = tag;\n        }\n      });\n    }\n  }, {\n    key: \"mapExpandableTag\",\n    value: function mapExpandableTag(tag) {\n      var _this6 = this;\n\n      /*/\n      const tagCompiler = this.compileExpandableTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      /*/\n      var expandProperty = tag.getAttribute('cv-expand');\n\n      var expandArg = _Bindable.Bindable.makeBindable(this.args[expandProperty] || {});\n\n      tag.removeAttribute('cv-expand');\n\n      var _loop = function _loop(i) {\n        if (i === 'name' || i === 'type') {\n          return \"continue\";\n        }\n\n        var debind = expandArg.bindTo(i, function (tag, i) {\n          return function (v) {\n            tag.setAttribute(i, v);\n          };\n        }(tag, i));\n\n        _this6.onRemove(function () {\n          debind();\n\n          if (expandArg.isBound()) {\n            _Bindable.Bindable.clearBindings(expandArg);\n          }\n        });\n      };\n\n      for (var i in expandArg) {\n        var _ret = _loop(i);\n\n        if (_ret === \"continue\") continue;\n      }\n\n      return tag; //*/\n    }\n  }, {\n    key: \"compileExpandableTag\",\n    value: function compileExpandableTag(sourceTag) {\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n        var expandProperty = tag.getAttribute('cv-expand');\n\n        var expandArg = _Bindable.Bindable.makeBindable(bindingView.args[expandProperty] || {});\n\n        tag.removeAttribute('cv-expand');\n\n        var _loop2 = function _loop2(i) {\n          if (i === 'name' || i === 'type') {\n            return \"continue\";\n          }\n\n          var debind = expandArg.bindTo(i, function (tag, i) {\n            return function (v) {\n              tag.setAttribute(i, v);\n            };\n          }(tag, i));\n          bindingView.onRemove(function () {\n            debind();\n\n            if (expandArg.isBound()) {\n              _Bindable.Bindable.clearBindings(expandArg);\n            }\n          });\n        };\n\n        for (var i in expandArg) {\n          var _ret2 = _loop2(i);\n\n          if (_ret2 === \"continue\") continue;\n        }\n\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapAttrTag\",\n    value: function mapAttrTag(tag) {\n      //*/\n      var tagCompiler = this.compileAttrTag(tag);\n      var newTag = tagCompiler(this);\n      tag.replaceWith(newTag);\n      return newTag;\n      /*/\n      \tlet attrProperty = tag.getAttribute('cv-attr');\n      \ttag.removeAttribute('cv-attr');\n      \tlet pairs = attrProperty.split(',');\n      let attrs = pairs.map((p) => p.split(':'));\n      \tfor (let i in attrs)\n      {\n      \tlet proxy        = this.args;\n      \tlet bindProperty = attrs[i][1];\n      \tlet property     = bindProperty;\n      \t\tif(bindProperty.match(/\\./))\n      \t{\n      \t\t[proxy, property] = Bindable.resolve(\n      \t\t\tthis.args\n      \t\t\t, bindProperty\n      \t\t\t, true\n      \t\t);\n      \t}\n      \t\tlet attrib = attrs[i][0];\n      \t\tthis.onRemove(proxy.bindTo(\n      \t\tproperty\n      \t\t, (v)=>{\n      \t\t\tif(v == null)\n      \t\t\t{\n      \t\t\t\ttag.setAttribute(attrib, '');\n      \t\t\t\treturn;\n      \t\t\t}\n      \t\t\ttag.setAttribute(attrib, v);\n      \t\t}\n      \t));\n      }\n      \treturn tag;\n      \t//*/\n    }\n  }, {\n    key: \"compileAttrTag\",\n    value: function compileAttrTag(sourceTag) {\n      var attrProperty = sourceTag.getAttribute('cv-attr');\n      var pairs = attrProperty.split(',');\n      var attrs = pairs.map(function (p) {\n        return p.split(':');\n      });\n      sourceTag.removeAttribute('cv-attr');\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n\n        var _loop3 = function _loop3(i) {\n          var bindProperty = attrs[i][1];\n\n          var _Bindable$resolve = _Bindable.Bindable.resolve(bindingView.args, bindProperty, true),\n              _Bindable$resolve2 = _slicedToArray(_Bindable$resolve, 2),\n              proxy = _Bindable$resolve2[0],\n              property = _Bindable$resolve2[1];\n\n          var attrib = attrs[i][0];\n          bindingView.onRemove(proxy.bindTo(property, function (v) {\n            if (v == null) {\n              tag.setAttribute(attrib, '');\n              return;\n            }\n\n            tag.setAttribute(attrib, v);\n          }));\n        };\n\n        for (var i in attrs) {\n          _loop3(i);\n        }\n\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapInterpolatableTag\",\n    value: function mapInterpolatableTag(tag) {\n      var _this7 = this;\n\n      var regex = this.interpolateRegex;\n\n      if (tag.nodeType === Node.TEXT_NODE) {\n        var original = tag.nodeValue;\n\n        if (!this.interpolatable(original)) {\n          return tag;\n        }\n\n        var header = 0;\n        var match;\n\n        var _loop4 = function _loop4() {\n          var bindProperty = match[2];\n          var unsafeHtml = false;\n          var unsafeView = false;\n          var propertySplit = bindProperty.split('|');\n          var transformer = false;\n\n          if (propertySplit.length > 1) {\n            transformer = _this7.stringTransformer(propertySplit.slice(1));\n            bindProperty = propertySplit[0];\n          }\n\n          if (bindProperty.substr(0, 2) === '$$') {\n            unsafeHtml = true;\n            unsafeView = true;\n            bindProperty = bindProperty.substr(2);\n          }\n\n          if (bindProperty.substr(0, 1) === '$') {\n            unsafeHtml = true;\n            bindProperty = bindProperty.substr(1);\n          }\n\n          if (bindProperty.substr(0, 3) === '000') {\n            expand = true;\n            bindProperty = bindProperty.substr(3);\n            return \"continue\";\n          }\n\n          var staticPrefix = original.substring(header, match.index);\n          header = match.index + match[1].length;\n          var staticNode = document.createTextNode(staticPrefix);\n          staticNode[dontParse] = true;\n          tag.parentNode.insertBefore(staticNode, tag);\n          var dynamicNode = void 0;\n\n          if (unsafeHtml) {\n            dynamicNode = document.createElement('div');\n          } else {\n            dynamicNode = document.createTextNode('');\n          }\n\n          dynamicNode[dontParse] = true;\n          var proxy = _this7.args;\n          var property = bindProperty;\n\n          if (bindProperty.match(/\\./)) {\n            var _Bindable$resolve3 = _Bindable.Bindable.resolve(_this7.args, bindProperty, true);\n\n            var _Bindable$resolve4 = _slicedToArray(_Bindable$resolve3, 2);\n\n            proxy = _Bindable$resolve4[0];\n            property = _Bindable$resolve4[1];\n          }\n\n          tag.parentNode.insertBefore(dynamicNode, tag);\n          var debind = proxy.bindTo(property, function (v, k, t) {\n            if (t[k] instanceof View && t[k] !== v) {\n              if (!t[k].preserve) {\n                t[k].remove();\n              }\n            }\n\n            dynamicNode.nodeValue = '';\n\n            if (unsafeView && !(v instanceof View)) {\n              var unsafeTemplate = v;\n              console.log(unsafeTemplate);\n              v = new View(_this7.args, _this7);\n              v.template = unsafeTemplate;\n            }\n\n            if (v instanceof View) {\n              var onAttach = function onAttach(parentNode) {\n                v.attached(parentNode);\n              };\n\n              _this7.attach.add(onAttach);\n\n              v.render(tag.parentNode, dynamicNode);\n\n              var cleanup = function cleanup() {\n                if (!v.preserve) {\n                  v.remove();\n                }\n              };\n\n              _this7.onRemove(cleanup);\n\n              v.onRemove(function () {\n                _this7.attach.remove(onAttach);\n\n                _this7._onRemove.remove(cleanup);\n              });\n            } else {\n              if (transformer) {\n                v = transformer(v);\n              }\n\n              if (v instanceof Object && v.__toString instanceof Function) {\n                v = v.__toString();\n              }\n\n              if (unsafeHtml) {\n                dynamicNode.innerHTML = v;\n              } else {\n                dynamicNode.nodeValue = v;\n              }\n\n              dynamicNode[dontParse] = true;\n            }\n          });\n\n          _this7.onRemove(function () {\n            debind();\n\n            if (!proxy.isBound()) {\n              _Bindable.Bindable.clearBindings(proxy);\n            }\n          });\n        };\n\n        while (match = regex.exec(original)) {\n          var _ret3 = _loop4();\n\n          if (_ret3 === \"continue\") continue;\n        }\n\n        var staticSuffix = original.substring(header);\n        var staticNode = document.createTextNode(staticSuffix);\n        staticNode[dontParse] = true;\n        tag.parentNode.insertBefore(staticNode, tag);\n        tag.nodeValue = '';\n      }\n\n      if (tag.nodeType === Node.ELEMENT_NODE) {\n        var _loop5 = function _loop5(i) {\n          if (!_this7.interpolatable(tag.attributes[i].value)) {\n            // console.log('!!', tag.attributes[i].value);\n            return \"continue\";\n          } // console.log(tag.attributes[i].value);\n\n\n          var header = 0;\n          var match = void 0;\n          var original = tag.attributes[i].value;\n          var attribute = tag.attributes[i];\n          var bindProperties = {};\n          var segments = [];\n\n          while (match = regex.exec(original)) {\n            segments.push(original.substring(header, match.index));\n\n            if (!bindProperties[match[2]]) {\n              bindProperties[match[2]] = [];\n            }\n\n            bindProperties[match[2]].push(segments.length);\n            segments.push(match[1]);\n            header = match.index + match[1].length;\n          }\n\n          segments.push(original.substring(header));\n\n          var _loop6 = function _loop6(j) {\n            var proxy = _this7.args;\n            var property = j;\n            var propertySplit = j.split('|');\n            var transformer = false;\n            var longProperty = j;\n\n            if (propertySplit.length > 1) {\n              transformer = _this7.stringTransformer(propertySplit.slice(1));\n              property = propertySplit[0];\n            }\n\n            if (property.match(/\\./)) {\n              var _Bindable$resolve5 = _Bindable.Bindable.resolve(_this7.args, property, true);\n\n              var _Bindable$resolve6 = _slicedToArray(_Bindable$resolve5, 2);\n\n              proxy = _Bindable$resolve6[0];\n              property = _Bindable$resolve6[1];\n            } // if(property.match(/\\./))\n            // {\n            // \t[proxy, property] = Bindable.resolve(\n            // \t\tthis.args\n            // \t\t, property\n            // \t\t, true\n            // \t);\n            // }\n            // console.log(this.args, property);\n\n\n            var matching = [];\n            var bindProperty = j;\n            var matchingSegments = bindProperties[longProperty];\n\n            _this7.onRemove(proxy.bindTo(property, function (v, k, t, d) {\n              if (transformer) {\n                v = transformer(v);\n              }\n\n              for (var _i7 in bindProperties) {\n                for (var _j in bindProperties[longProperty]) {\n                  segments[bindProperties[longProperty][_j]] = t[_i7];\n\n                  if (k === property) {\n                    segments[bindProperties[longProperty][_j]] = v;\n                  }\n                }\n              }\n\n              tag.setAttribute(attribute.name, segments.join(''));\n            }));\n\n            _this7.onRemove(function () {\n              if (!proxy.isBound()) {\n                _Bindable.Bindable.clearBindings(proxy);\n              }\n            });\n          };\n\n          for (var j in bindProperties) {\n            _loop6(j);\n          }\n        };\n\n        for (var i = 0; i < tag.attributes.length; i++) {\n          var _ret4 = _loop5(i);\n\n          if (_ret4 === \"continue\") continue;\n        }\n      }\n\n      return tag;\n    }\n  }, {\n    key: \"mapRefTag\",\n    value: function mapRefTag(tag) {\n      var refAttr = tag.getAttribute('cv-ref');\n\n      var _refAttr$split = refAttr.split(':'),\n          _refAttr$split2 = _slicedToArray(_refAttr$split, 3),\n          refProp = _refAttr$split2[0],\n          refClassname = _refAttr$split2[1],\n          refKey = _refAttr$split2[2];\n\n      if (!refClassname) {\n        refClassname = 'curvature/base/Tag';\n      }\n\n      var refClass = this.stringToClass(refClassname);\n      tag.removeAttribute('cv-ref');\n      Object.defineProperty(tag, '___tag___', {\n        enumerable: false,\n        writable: true\n      });\n      this.onRemove(function () {\n        tag.___tag___ = null;\n        tag.remove();\n      });\n      var parent = this;\n      var direct = this;\n\n      if (this.viewList) {\n        parent = this.viewList.parent; // if(!this.viewList.parent.tags[refProp])\n        // {\n        // \tthis.viewList.parent.tags[refProp] = [];\n        // }\n        // let refKeyVal = this.args[refKey];\n        // this.viewList.parent.tags[refProp][refKeyVal] = new refClass(\n        // \ttag, this, refProp, refKeyVal\n        // );\n      } else {// this.tags[refProp] = new refClass(\n          // \ttag, this, refProp\n          // );\n        }\n\n      var tagObject = new refClass(tag, this, refProp, undefined, direct);\n      tag.___tag___ = tagObject;\n      this.tags[refProp] = tag;\n\n      while (parent) {\n        if (!parent.parent) {}\n\n        var refKeyVal = this.args[refKey];\n\n        if (refKeyVal !== undefined) {\n          if (!parent.tags[refProp]) {\n            parent.tags[refProp] = [];\n          }\n\n          parent.tags[refProp][refKeyVal] = tagObject;\n        } else {\n          parent.tags[refProp] = tagObject;\n        }\n\n        parent = parent.parent;\n      }\n\n      return tag;\n    }\n  }, {\n    key: \"mapBindTag\",\n    value: function mapBindTag(tag) {\n      var _this8 = this;\n\n      var bindArg = tag.getAttribute('cv-bind');\n      var proxy = this.args;\n      var property = bindArg;\n      var top = null;\n\n      if (bindArg.match(/\\./)) {\n        var _Bindable$resolve7 = _Bindable.Bindable.resolve(this.args, bindArg, true);\n\n        var _Bindable$resolve8 = _slicedToArray(_Bindable$resolve7, 3);\n\n        proxy = _Bindable$resolve8[0];\n        property = _Bindable$resolve8[1];\n        top = _Bindable$resolve8[2];\n      }\n\n      if (proxy !== this.args) {\n        this.subBindings[bindArg] = this.subBindings[bindArg] || [];\n        this.onRemove(this.args.bindTo(top, function () {\n          while (_this8.subBindings.length) {\n            _this8.subBindings.shift()();\n          }\n        }));\n      }\n\n      var unsafeHtml = false;\n\n      if (property.substr(0, 1) === '$') {\n        property = property.substr(1);\n        unsafeHtml = true;\n      }\n\n      var debind = proxy.bindTo(property, function (v, k, t, d, p) {\n        if (p instanceof View && p !== v) {\n          p.remove();\n        }\n\n        var autoChangedEvent = new CustomEvent('cvAutoChanged', {\n          bubbles: true\n        });\n\n        if (tag.tagName === 'INPUT' || tag.tagName === 'SELECT' || tag.tagName === 'TEXTAREA') {\n          var _type = tag.getAttribute('type');\n\n          if (_type && _type.toLowerCase() === 'checkbox') {\n            tag.checked = !!v;\n            tag.dispatchEvent(autoChangedEvent);\n          } else if (_type && _type.toLowerCase() === 'radio') {\n            tag.checked = v == tag.value;\n            tag.dispatchEvent(autoChangedEvent);\n          } else if (_type !== 'file') {\n            if (tag.tagName === 'SELECT') {\n              // console.log(k, v, tag.outerHTML, tag.options.length);\n              for (var i in tag.options) {\n                var option = tag.options[i];\n\n                if (option.value == v) {\n                  tag.selectedIndex = i;\n                }\n              }\n            }\n\n            tag.value = v == null ? '' : v;\n            tag.dispatchEvent(autoChangedEvent);\n          }\n        } else {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = tag.childNodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var node = _step.value;\n              node.remove();\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                _iterator[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          if (v instanceof View) {\n            var onAttach = function onAttach(parentNode) {\n              v.attached(parentNode);\n            };\n\n            _this8.attach.add(onAttach);\n\n            v.render(tag);\n            v.onRemove(function () {\n              return _this8.attach.remove(onAttach);\n            });\n          } else if (unsafeHtml) {\n            tag.innerHTML = v;\n          } else {\n            tag.textContent = v;\n          }\n        }\n      });\n\n      if (proxy !== this.args) {\n        this.subBindings[bindArg].push(debind);\n      }\n\n      this.onRemove(debind);\n      var type = tag.getAttribute('type');\n      var multi = tag.getAttribute('multiple');\n\n      var inputListener = function inputListener(event) {\n        // console.log(event, proxy, property, event.target.value);\n        if (event.target !== tag) {\n          return;\n        }\n\n        if (type && type.toLowerCase() === 'checkbox') {\n          if (tag.checked) {\n            proxy[property] = event.target.getAttribute('value');\n          } else {\n            proxy[property] = false;\n          }\n        } else if (type === 'file' && multi) {\n          var files = Array.from(event.target.files);\n          var current = proxy[property] || proxy.___deck___[property];\n\n          if (!current || !files.length) {\n            proxy[property] = files;\n          } else {\n            var _loop7 = function _loop7(i) {\n              if (files[i] !== current[i]) {\n                files[i].toJSON = function () {\n                  return {\n                    name: file[i].name,\n                    size: file[i].size,\n                    type: file[i].type,\n                    date: file[i].lastModified\n                  };\n                };\n\n                current[i] = files[i];\n                return \"break\";\n              }\n            };\n\n            for (var i in files) {\n              var _ret5 = _loop7(i);\n\n              if (_ret5 === \"break\") break;\n            }\n          }\n        } else if (type === 'file' && !multi) {\n          var _file = event.target.files.item(0);\n\n          _file.toJSON = function () {\n            return {\n              name: _file.name,\n              size: _file.size,\n              type: _file.type,\n              date: _file.lastModified\n            };\n          };\n\n          proxy[property] = _file;\n        } else {\n          proxy[property] = event.target.value;\n        }\n      };\n\n      if (type === 'file' || type === 'radio') {\n        tag.addEventListener('change', inputListener);\n      } else {\n        tag.addEventListener('input', inputListener);\n        tag.addEventListener('change', inputListener);\n        tag.addEventListener('value-changed', inputListener);\n      }\n\n      this.onRemove(function (tag, eventListener) {\n        return function () {\n          if (type === 'file' || type === 'radio') {\n            tag.removeEventListener('change', inputListener);\n          } else {\n            tag.removeEventListener('input', inputListener);\n            tag.removeEventListener('change', inputListener);\n            tag.removeEventListener('value-changed', inputListener);\n          }\n\n          tag = undefined;\n          eventListener = undefined;\n        };\n      }(tag, inputListener));\n      tag.removeAttribute('cv-bind');\n      return tag;\n    }\n  }, {\n    key: \"mapOnTag\",\n    value: function mapOnTag(tag) {\n      var _this9 = this;\n\n      var referent = String(tag.getAttribute('cv-on'));\n      var action = referent.split(';').map(function (a) {\n        return a.split(':');\n      }).map(function (a) {\n        a = a.map(function (a) {\n          return a.trim();\n        });\n        var eventName = a[0].trim();\n        var callbackName = a[1];\n        var eventFlags = String(a[2] || '');\n        var argList = [];\n        var groups = /(\\w+)(?:\\(([$\\w\\s'\",]+)\\))?/.exec(callbackName);\n\n        if (!groups) {\n          throw new Error('Invalid event method referent: ' + tag.getAttribute('cv-on'));\n        }\n\n        if (groups.length) {\n          callbackName = groups[1].replace(/(^[\\s\\n]+|[\\s\\n]+$)/, '');\n\n          if (groups[2]) {\n            argList = groups[2].split(',').map(function (s) {\n              return s.trim();\n            });\n          }\n        }\n\n        if (!eventName) {\n          eventName = callbackName;\n        }\n\n        var eventMethod;\n        var parent = _this9;\n\n        while (parent) {\n          if (typeof parent[callbackName] === 'function') {\n            var _ret6 = function () {\n              var _parent = parent;\n              var _callBackName = callbackName;\n\n              eventMethod = function eventMethod() {\n                _parent[_callBackName].apply(_parent, arguments);\n              };\n\n              return \"break\";\n            }();\n\n            if (_ret6 === \"break\") break;\n          }\n\n          if (parent.parent) {\n            parent = parent.parent;\n          } else {\n            break;\n          }\n        }\n\n        var eventListener = function eventListener(event) {\n          var argRefs = argList.map(function (arg) {\n            var match;\n\n            if (parseInt(arg) == arg) {\n              return arg;\n            } else if (arg === 'event' || arg === '$event') {\n              return event;\n            } else if (arg === '$view') {\n              return parent;\n            } else if (arg === '$tag') {\n              return tag;\n            } else if (arg === '$parent') {\n              return _this9.parent;\n            } else if (arg === '$subview') {\n              return _this9;\n            } else if (arg in _this9.args) {\n              return _this9.args[arg];\n            } else if (match = /^['\"](\\w+?)[\"']$/.exec(arg)) {\n              return match[1];\n            }\n          });\n\n          if (!(typeof eventMethod === 'function')) {\n            throw new Error(\"\".concat(callbackName, \" is not defined on View object.\") + \"\\n\" + \"Tag:\" + \"\\n\" + \"\".concat(tag.outerHTML));\n          }\n\n          eventMethod.apply(void 0, _toConsumableArray(argRefs));\n        };\n\n        var eventOptions = {};\n\n        if (eventFlags.includes('p')) {\n          eventOptions.passive = true;\n        } else if (eventFlags.includes('P')) {\n          eventOptions.passive = false;\n        }\n\n        if (eventFlags.includes('c')) {\n          eventOptions.capture = true;\n        } else if (eventFlags.includes('C')) {\n          eventOptions.capture = false;\n        }\n\n        if (eventFlags.includes('o')) {\n          eventOptions.once = true;\n        } else if (eventFlags.includes('O')) {\n          eventOptions.once = false;\n        }\n\n        switch (eventName) {\n          case '_init':\n            eventListener();\n            break;\n\n          case '_attach':\n            _this9.attach.add(eventListener);\n\n            break;\n\n          case '_detach':\n            _this9.detach.add(eventListener);\n\n            break;\n\n          default:\n            tag.addEventListener(eventName, eventListener, eventOptions);\n\n            _this9.onRemove(function () {\n              tag.removeEventListener(eventName, eventListener, eventOptions);\n            });\n\n            break;\n        }\n\n        return [eventName, callbackName, argList];\n      });\n      tag.removeAttribute('cv-on');\n      return tag;\n    }\n  }, {\n    key: \"mapLinkTag\",\n    value: function mapLinkTag(tag) {\n      /*/\n      const tagCompiler = this.compileLinkTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      /*/\n      var linkAttr = tag.getAttribute('cv-link');\n      tag.setAttribute('href', linkAttr);\n\n      var linkClick = function linkClick(event) {\n        event.preventDefault();\n\n        if (linkAttr.substring(0, 4) === 'http' || linkAttr.substring(0, 2) === '//') {\n          window.open(tag.getAttribute('href', linkAttr));\n          return;\n        }\n\n        _Router.Router.go(tag.getAttribute('href'));\n      };\n\n      tag.addEventListener('click', linkClick);\n      this.onRemove(function (tag, eventListener) {\n        return function () {\n          tag.removeEventListener('click', eventListener);\n          tag = undefined;\n          eventListener = undefined;\n        };\n      }(tag, linkClick));\n      tag.removeAttribute('cv-link');\n      return tag; //*/\n    }\n  }, {\n    key: \"compileLinkTag\",\n    value: function compileLinkTag(sourceTag) {\n      var linkAttr = sourceTag.getAttribute('cv-link');\n      sourceTag.removeAttribute('cv-link');\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n        tag.setAttribute('href', linkAttr);\n        tag.addEventListener('click', View.linkClicked);\n        bindingView.onRemove(function () {\n          return tag.removeEventListener(View.linkClicked);\n        });\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapPrendererTag\",\n    value: function mapPrendererTag(tag) {\n      var prerenderAttr = tag.getAttribute('cv-prerender');\n      var prerendering = window.prerenderer || navigator.userAgent.match(/prerender/i);\n\n      if (prerendering) {\n        window.prerenderer = window.prerenderer || true;\n      }\n\n      if (prerenderAttr === 'never' && prerendering || prerenderAttr === 'only' && !prerendering) {\n        tag.parentNode.removeChild(tag);\n      }\n\n      return tag;\n    }\n  }, {\n    key: \"mapWithTag\",\n    value: function mapWithTag(tag) {\n      var _this10 = this;\n\n      var withAttr = tag.getAttribute('cv-with');\n      var carryAttr = tag.getAttribute('cv-carry');\n      tag.removeAttribute('cv-with');\n      tag.removeAttribute('cv-carry');\n      var subTemplate = new DocumentFragment();\n      Array.from(tag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n);\n      });\n      var carryProps = [];\n\n      if (carryAttr) {\n        carryProps = carryAttr.split(',').map(function (s) {\n          return s.trim();\n        });\n      }\n\n      var debind = this.args.bindTo(withAttr, function (v, k, t, d) {\n        if (_this10.withViews[k]) {\n          _this10.withViews[k].remove();\n        }\n\n        while (tag.firstChild) {\n          tag.removeChild(tag.firstChild);\n        }\n\n        var view = new View({}, _this10);\n\n        _this10.onRemove(function (view) {\n          return function () {\n            view.remove();\n          };\n        }(view));\n\n        view.template = subTemplate;\n\n        var _loop8 = function _loop8(i) {\n          var debind = _this10.args.bindTo(carryProps[i], function (v, k) {\n            view.args[k] = v;\n          });\n\n          view.onRemove(debind);\n\n          _this10.onRemove(function () {\n            debind();\n            view.remove();\n          });\n        };\n\n        for (var i in carryProps) {\n          _loop8(i);\n        }\n\n        var _loop9 = function _loop9(_i8) {\n          var debind = v.bindTo(_i8, function (v, k) {\n            view.args[k] = v;\n          });\n\n          _this10.onRemove(function () {\n            debind();\n\n            if (!v.isBound()) {\n              _Bindable.Bindable.clearBindings(v);\n            }\n\n            view.remove();\n          });\n\n          view.onRemove(function () {\n            debind();\n\n            if (!v.isBound()) {\n              _Bindable.Bindable.clearBindings(v);\n            }\n          });\n        };\n\n        for (var _i8 in v) {\n          _loop9(_i8);\n        }\n\n        view.render(tag);\n        _this10.withViews[k] = view;\n      });\n      this.onRemove(debind);\n      return tag;\n    }\n  }, {\n    key: \"mapEachTag\",\n    value: function mapEachTag(tag) {\n      var _this11 = this;\n\n      var eachAttr = tag.getAttribute('cv-each');\n      tag.removeAttribute('cv-each');\n      var subTemplate = new DocumentFragment();\n      Array.from(tag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n);\n      });\n\n      var _eachAttr$split = eachAttr.split(':'),\n          _eachAttr$split2 = _slicedToArray(_eachAttr$split, 3),\n          eachProp = _eachAttr$split2[0],\n          asProp = _eachAttr$split2[1],\n          keyProp = _eachAttr$split2[2];\n\n      var debind = this.args.bindTo(eachProp, function (v, k, t, d, p) {\n        if (_this11.viewLists[eachProp]) {\n          _this11.viewLists[eachProp].remove();\n        }\n\n        var viewList = new _ViewList.ViewList(subTemplate, asProp, v, _this11, keyProp);\n\n        var viewListRemover = function viewListRemover() {\n          return viewList.remove();\n        };\n\n        _this11.onRemove(viewListRemover);\n\n        viewList.onRemove(function () {\n          return _this11._onRemove.remove(viewListRemover);\n        });\n\n        var debindA = _this11.args.bindTo(function (v, k, t, d) {\n          if (k === '_id') {\n            return;\n          }\n\n          viewList.args.subArgs[k] = v;\n        });\n\n        var debindB = viewList.args.bindTo(function (v, k, t, d, p) {\n          if (k === '_id' || k === 'value' || k.substring(0, 3) === '___') {\n            return;\n          }\n\n          if (k in _this11.args) {\n            _this11.args[k] = v;\n          }\n        });\n\n        _this11.onRemove(debindA);\n\n        _this11.onRemove(debindB);\n\n        while (tag.firstChild) {\n          tag.removeChild(tag.firstChild);\n        }\n\n        _this11.viewLists[eachProp] = viewList;\n        viewList.render(tag);\n      });\n      this.onRemove(debind);\n      return tag;\n    }\n  }, {\n    key: \"mapIfTag\",\n    value: function mapIfTag(tag) {\n      /*/\n      const tagCompiler = this.compileIfTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      \t/*/\n      var sourceTag = tag;\n      var ifProperty = sourceTag.getAttribute('cv-if');\n      var inverted = false;\n      sourceTag.removeAttribute('cv-if');\n\n      if (ifProperty.substr(0, 1) === '!') {\n        ifProperty = ifProperty.substr(1);\n        inverted = true;\n      }\n\n      var subTemplate = new DocumentFragment();\n      Array.from(sourceTag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n);\n      } // n => subTemplate.appendChild(n.cloneNode(true))\n      );\n      var bindingView = this;\n      var ifDoc = new DocumentFragment();\n      var view = new View(this.args, bindingView);\n      view.template = subTemplate; // view.parent   = bindingView;\n      // bindingView.syncBind(view);\n\n      var proxy = bindingView.args;\n      var property = ifProperty;\n\n      if (ifProperty.match(/\\./)) {\n        var _Bindable$resolve9 = _Bindable.Bindable.resolve(bindingView.args, ifProperty, true);\n\n        var _Bindable$resolve10 = _slicedToArray(_Bindable$resolve9, 2);\n\n        proxy = _Bindable$resolve10[0];\n        property = _Bindable$resolve10[1];\n      }\n\n      var hasRendered = false;\n      var propertyDebind = proxy.bindTo(property, function (v, k) {\n        if (!hasRendered) {\n          var initValue = proxy[property];\n          var renderDoc = !!initValue ^ !!inverted ? tag : ifDoc;\n          view.render(renderDoc);\n          hasRendered = true;\n          return;\n        }\n\n        if (Array.isArray(v)) {\n          v = !!v.length;\n        }\n\n        if (inverted) {\n          v = !v;\n        }\n\n        if (v) {\n          tag.appendChild(ifDoc);\n        } else {\n          view.nodes.map(function (n) {\n            return ifDoc.appendChild(n);\n          });\n        }\n      }); // const propertyDebind = this.args.bindChain(property, onUpdate);\n\n      bindingView.onRemove(propertyDebind);\n\n      var bindableDebind = function bindableDebind() {\n        if (!proxy.isBound()) {\n          _Bindable.Bindable.clearBindings(proxy);\n        }\n      };\n\n      var viewDebind = function viewDebind() {\n        propertyDebind();\n        bindableDebind();\n\n        bindingView._onRemove.remove(propertyDebind);\n\n        bindingView._onRemove.remove(bindableDebind);\n      };\n\n      bindingView.onRemove(viewDebind);\n      return tag; //*/\n    }\n  }, {\n    key: \"compileIfTag\",\n    value: function compileIfTag(sourceTag) {\n      var ifProperty = sourceTag.getAttribute('cv-if');\n      var inverted = false;\n      sourceTag.removeAttribute('cv-if');\n\n      if (ifProperty.substr(0, 1) === '!') {\n        ifProperty = ifProperty.substr(1);\n        inverted = true;\n      }\n\n      var subTemplate = new DocumentFragment();\n      Array.from(sourceTag.childNodes).map(function (n) {\n        return subTemplate.appendChild(n.cloneNode(true));\n      });\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode();\n        var ifDoc = new DocumentFragment();\n        var view = new View({}, bindingView);\n        view.template = subTemplate; // view.parent   = bindingView;\n\n        bindingView.syncBind(view);\n        var proxy = bindingView.args;\n        var property = ifProperty;\n\n        if (ifProperty.match(/\\./)) {\n          var _Bindable$resolve11 = _Bindable.Bindable.resolve(bindingView.args, ifProperty, true);\n\n          var _Bindable$resolve12 = _slicedToArray(_Bindable$resolve11, 2);\n\n          proxy = _Bindable$resolve12[0];\n          property = _Bindable$resolve12[1];\n        }\n\n        var hasRendered = false;\n        var propertyDebind = proxy.bindTo(property, function (v, k) {\n          if (!hasRendered) {\n            var renderDoc = bindingView.args[property] || inverted ? tag : ifDoc;\n            view.render(renderDoc);\n            hasRendered = true;\n            return;\n          }\n\n          if (Array.isArray(v)) {\n            v = !!v.length;\n          }\n\n          if (inverted) {\n            v = !v;\n          }\n\n          if (v) {\n            tag.appendChild(ifDoc);\n          } else {\n            view.nodes.map(function (n) {\n              return ifDoc.appendChild(n);\n            });\n          }\n        }); // let cleaner = bindingView;\n        // while(cleaner.parent)\n        // {\n        // \tcleaner = cleaner.parent;\n        // }\n\n        bindingView.onRemove(propertyDebind);\n\n        var bindableDebind = function bindableDebind() {\n          if (!proxy.isBound()) {\n            _Bindable.Bindable.clearBindings(proxy);\n          }\n        };\n\n        var viewDebind = function viewDebind() {\n          propertyDebind();\n          bindableDebind();\n\n          bindingView._onRemove.remove(propertyDebind);\n\n          bindingView._onRemove.remove(bindableDebind);\n        };\n\n        view.onRemove(viewDebind);\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapTemplateTag\",\n    value: function mapTemplateTag(tag) {\n      var templateName = tag.getAttribute('cv-template');\n      tag.removeAttribute('cv-template');\n\n      this.subTemplates[templateName] = function () {\n        return tag.tagName === 'TEMPLATE' ? tag.content.cloneNode(true) : new DocumentFragment(tag.innerHTML);\n      };\n\n      return tag;\n    }\n  }, {\n    key: \"mapSlotTag\",\n    value: function mapSlotTag(tag) {\n      var templateName = tag.getAttribute('cv-slot');\n      var getTemplate = this.subTemplates[templateName];\n\n      if (!getTemplate) {\n        return;\n      }\n\n      var template = getTemplate();\n      tag.removeAttribute('cv-slot');\n\n      while (tag.firstChild) {\n        tag.firstChild.remove();\n      }\n\n      tag.appendChild(template);\n      return tag;\n    } // compileTag(sourceTag)\n    // {\n    // \treturn (bindingView) => {\n    // \t\tconst tag = sourceTag.cloneNode(true);\n    // \t\treturn tag;\n    // \t};\n    // }\n\n  }, {\n    key: \"syncBind\",\n    value: function syncBind(subView) {\n      var _this12 = this;\n\n      var debindA = this.args.bindTo(function (v, k, t, d) {\n        if (k === '_id') {\n          return;\n        }\n\n        if (subView.args[k] !== v) {\n          subView.args[k] = v;\n        }\n      }); // for(let i in this.args)\n      // {\n      // \tif(i == '_id')\n      // \t{\n      // \t\tcontinue;\n      // \t}\n      // \tsubView.args[i] = this.args[i];\n      // }\n\n      var debindB = subView.args.bindTo(function (v, k, t, d, p) {\n        if (k === '_id') {\n          return;\n        }\n\n        var newRef = v;\n        var oldRef = p;\n\n        if (newRef instanceof View) {\n          newRef = newRef.___ref___;\n        }\n\n        if (oldRef instanceof View) {\n          oldRef = oldRef.___ref___;\n        }\n\n        if (newRef !== oldRef && oldRef instanceof View) {\n          p.remove();\n        }\n\n        if (k in _this12.args) {\n          _this12.args[k] = v;\n        }\n      });\n      this.onRemove(debindA);\n      this.onRemove(debindB);\n      subView.onRemove(function () {\n        _this12._onRemove.remove(debindA);\n\n        _this12._onRemove.remove(debindB);\n      });\n    }\n  }, {\n    key: \"postRender\",\n    value: function postRender(parentNode) {}\n  }, {\n    key: \"attached\",\n    value: function attached(parentNode) {}\n  }, {\n    key: \"interpolatable\",\n    value: function interpolatable(str) {\n      return !!String(str).match(this.interpolateRegex);\n    }\n  }, {\n    key: \"uuid\",\n    value: function uuid() {\n      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n        return (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16);\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var _this13 = this;\n\n      var now = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      var remover = function remover() {\n        _this13.firstNode = _this13.lastNode = undefined;\n\n        for (var _i9 in _this13.nodes) {\n          _this13.nodes[_i9].dispatchEvent(new Event('cvDomDetached'));\n\n          _this13.nodes[_i9].remove();\n        } // Bindable.clearBindings(this.args);\n\n      };\n\n      if (now) {\n        remover();\n      } else {\n        requestAnimationFrame(remover);\n      }\n\n      var callbacks = this._onRemove.items();\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = callbacks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var callback = _step2.value;\n\n          this._onRemove.remove(callback);\n\n          callback();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var cleanup;\n\n      while (cleanup = this.cleanup.shift()) {\n        cleanup && cleanup();\n      }\n\n      for (var _i10 in this.viewLists) {\n        if (!this.viewLists[_i10]) {\n          continue;\n        }\n\n        this.viewLists[_i10].remove();\n      }\n\n      this.viewLists = [];\n\n      for (var _i11 in this.timeouts) {\n        clearInterval(this.timeouts[_i11].timeout);\n        delete this.timeouts[_i11];\n      }\n\n      for (var i in this.intervals) {\n        clearInterval(this.intervals[i].timeout);\n        delete this.intervals[i];\n      }\n\n      this.removed = true;\n    }\n  }, {\n    key: \"findTag\",\n    value: function findTag(selector) {\n      for (var i in this.nodes) {\n        var result = void 0;\n\n        if (!this.nodes[i].querySelector) {\n          continue;\n        }\n\n        if (this.nodes[i].matches(selector)) {\n          return this.nodes[i];\n        }\n\n        if (result = this.nodes[i].querySelector(selector)) {\n          return result;\n        }\n      }\n    }\n  }, {\n    key: \"findTags\",\n    value: function findTags(selector) {\n      return this.nodes, map(function (n) {\n        return n.querySelectorAll(selector);\n      }).flat();\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove(callback) {\n      this._onRemove.add(callback);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {}\n  }, {\n    key: \"beforeUpdate\",\n    value: function beforeUpdate(args) {}\n  }, {\n    key: \"afterUpdate\",\n    value: function afterUpdate(args) {}\n  }, {\n    key: \"stringTransformer\",\n    value: function stringTransformer(methods) {\n      var _this14 = this;\n\n      return function (x) {\n        for (var m in methods) {\n          var parent = _this14;\n          var method = methods[m];\n\n          while (parent && !parent[method]) {\n            parent = parent.parent;\n          }\n\n          if (!parent) {\n            return;\n          }\n\n          x = parent[methods[m]](x);\n        }\n\n        return x;\n      };\n    }\n  }, {\n    key: \"stringToClass\",\n    value: function stringToClass(refClassname) {\n      if (View.refClasses.has(refClassname)) {\n        return View.refClasses.get(refClassname);\n      }\n\n      var refClassSplit = refClassname.split('/');\n      var refShortClassname = refClassSplit[refClassSplit.length - 1];\n\n      var refClass = require(refClassname);\n\n      View.refClasses.set(refClassname, refClass[refShortClassname]);\n      return refClass[refShortClassname];\n    }\n  }, {\n    key: \"preventParsing\",\n    value: function preventParsing(node) {\n      node[dontParse] = true;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.nodes.map(function (n) {\n        return n.outerHTML;\n      }).join(' ');\n    }\n  }], [{\n    key: \"isView\",\n    value: function isView() {\n      return View;\n    }\n  }]);\n\n  return View;\n}();\n\nexports.View = View;\nObject.defineProperty(View, 'templates', {\n  enumerable: false,\n  writable: false,\n  value: new Map()\n});\nObject.defineProperty(View, 'refClasses', {\n  enumerable: false,\n  writable: false,\n  value: new Map()\n});\nObject.defineProperty(View, 'linkClicked', function (event) {\n  event.preventDefault();\n  var href = event.target.getAttribute('href');\n\n  if (href.substring(0, 4) === 'http' || href.substring(0, 2) === '//') {\n    window.open(href);\n    return;\n  }\n\n  _Router.Router.go(href);\n});\n  })();\n});","\nrequire.register(\"curvature/base/ViewList.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewList = void 0;\n\nvar _Bindable = require(\"./Bindable\");\n\nvar _View = require(\"./View\");\n\nvar _Bag = require(\"./Bag\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ViewList = /*#__PURE__*/function () {\n  function ViewList(template, subProperty, list, parent) {\n    var _this = this;\n\n    var keyProperty = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, ViewList);\n\n    this.args = _Bindable.Bindable.makeBindable({});\n    this.args.value = _Bindable.Bindable.makeBindable(list || {});\n    this.args.subArgs = _Bindable.Bindable.makeBindable({});\n    this.views = [];\n    this.cleanup = [];\n    this._onRemove = new _Bag.Bag();\n    this.template = template;\n    this.subProperty = subProperty;\n    this.keyProperty = keyProperty;\n    this.tag = null;\n    this.paused = false;\n    this.parent = parent;\n    this.rendered = new Promise(function (accept, reject) {\n      Object.defineProperty(_this, 'renderComplete', {\n        configurable: false,\n        writable: true,\n        value: accept\n      });\n    });\n    this.willReRender = false;\n\n    this.args.___before(function (t, e, s, o) {\n      if (e == 'bindTo') {\n        return;\n      }\n\n      _this.paused = true;\n    });\n\n    this.args.___after(function (t, e, s, o) {\n      if (e == 'bindTo') {\n        return;\n      }\n\n      _this.paused = s.length > 1;\n\n      _this.reRender();\n    });\n\n    var debind = this.args.value.bindTo(function (v, k, t, d) {\n      if (_this.paused) {\n        return;\n      }\n\n      var kk = k;\n\n      if (isNaN(k)) {\n        kk = '_' + k;\n      }\n\n      if (d) {\n        if (_this.views[kk]) {\n          _this.views[kk].remove();\n        }\n\n        delete _this.views[kk]; // this.views.splice(k,1);\n\n        for (var i in _this.views) {\n          if (typeof i === 'string') {\n            _this.views[i].args[_this.keyProperty] = i.substr(1);\n            continue;\n          }\n\n          _this.views[i].args[_this.keyProperty] = i;\n        }\n      } else if (!_this.views[kk] && !_this.willReRender) {\n        _this.willReRender = requestAnimationFrame(function () {\n          _this.reRender();\n        });\n      } else if (_this.views[kk] && _this.views[kk].args) {\n        _this.views[kk].args[_this.keyProperty] = k;\n        _this.views[kk].args[_this.subProperty] = v;\n      }\n    });\n\n    this._onRemove.add(debind);\n  }\n\n  _createClass(ViewList, [{\n    key: \"render\",\n    value: function render(tag) {\n      var _this2 = this;\n\n      var renders = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var view = _step.value;\n          view.render(tag);\n          renders.push(view.rendered.then(function () {\n            return view;\n          }));\n        };\n\n        for (var _iterator = this.views[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          _loop();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.tag = tag;\n      Promise.all(renders).then(function (views) {\n        return _this2.renderComplete(views);\n      });\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      var _this3 = this;\n\n      if (this.paused || !this.tag) {\n        return;\n      }\n\n      var views = [];\n\n      for (var i in this.views) {\n        views[i] = this.views[i];\n      }\n\n      var finalViews = [];\n\n      for (var _i in this.args.value) {\n        var found = false;\n        var k = _i;\n\n        if (isNaN(k)) {\n          k = '_' + _i;\n        }\n\n        for (var j in views) {\n          if (views[j] && this.args.value[_i] !== undefined && this.args.value[_i] === views[j].args[this.subProperty]) {\n            found = true;\n            finalViews[k] = views[j];\n            finalViews[k].args[this.keyProperty] = _i;\n            delete views[j];\n            break;\n          }\n        }\n\n        if (!found) {\n          (function () {\n            var viewArgs = {};\n            var view = finalViews[k] = new _View.View(viewArgs, _this3.parent);\n            finalViews[k].template = _this3.template instanceof Object ? _this3.template : _this3.template; // finalViews[k].parent   = this.parent;\n\n            finalViews[k].viewList = _this3;\n            finalViews[k].args[_this3.keyProperty] = _i;\n            finalViews[k].args[_this3.subProperty] = _this3.args.value[_i];\n            var upDebind = viewArgs.bindTo(_this3.subProperty, function (v, k) {\n              var index = viewArgs[_this3.keyProperty];\n              _this3.args.value[index] = v;\n            });\n\n            var downDebind = _this3.args.subArgs.bindTo(function (v, k, t, d) {\n              viewArgs[k] = v;\n            });\n\n            view.onRemove(function () {\n              upDebind();\n              downDebind();\n\n              _this3._onRemove.remove(upDebind);\n\n              _this3._onRemove.remove(downDebind);\n            });\n\n            _this3._onRemove.add(upDebind);\n\n            _this3._onRemove.add(downDebind);\n\n            viewArgs[_this3.subProperty] = _this3.args.value[_i];\n          })();\n        }\n      }\n\n      for (var _i2 in views) {\n        var _found = false;\n\n        for (var _j in finalViews) {\n          if (views[_i2] === finalViews[_j]) {\n            _found = true;\n            break;\n          }\n        }\n\n        if (!_found) {\n          views[_i2].remove();\n        }\n      }\n\n      if (Array.isArray(this.args.value)) {\n        var renderRecurse = function renderRecurse() {\n          var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var ii = finalViews.length - i - 1;\n\n          if (!finalViews[ii]) {\n            return Promise.resolve();\n          }\n\n          if (finalViews[ii] === _this3.views[ii]) {\n            if (!finalViews[ii].firstNode) {\n              finalViews[ii].render(_this3.tag, finalViews[ii + 1]);\n              return finalViews[ii].rendered.then(function () {\n                return renderRecurse(i + 1);\n              });\n            }\n\n            return renderRecurse(i + 1);\n          }\n\n          finalViews[ii].render(_this3.tag, finalViews[ii + 1]);\n\n          _this3.views.splice(ii, 0, finalViews[ii]);\n\n          return finalViews[ii].rendered.then(function () {\n            return renderRecurse(i + 1);\n          });\n        };\n\n        this.rendered = renderRecurse();\n      } else {\n        var renders = [];\n        var leftovers = Object.assign({}, finalViews);\n\n        var _loop2 = function _loop2(_i3) {\n          delete leftovers[_i3];\n\n          if (finalViews[_i3].firstNode && finalViews[_i3] === _this3.views[_i3]) {\n            return \"continue\";\n          }\n\n          finalViews[_i3].render(_this3.tag);\n\n          renders.push(finalViews[_i3].rendered.then(function () {\n            return finalViews[_i3];\n          }));\n        };\n\n        for (var _i3 in finalViews) {\n          var _ret = _loop2(_i3);\n\n          if (_ret === \"continue\") continue;\n        }\n\n        for (var _i4 in leftovers) {\n          delete this.args.views[_i4];\n          leftovers.remove();\n        }\n\n        this.rendered = Promise.all(renders);\n      }\n\n      this.views = finalViews;\n\n      for (var _i5 in finalViews) {\n        if (isNaN(_i5)) {\n          finalViews[_i5].args[this.keyProperty] = _i5.substr(1);\n          continue;\n        }\n\n        finalViews[_i5].args[this.keyProperty] = _i5;\n      }\n\n      this.willReRender = false;\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var _pause = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      for (var i in this.views) {\n        this.views[i].pause(_pause);\n      }\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove(callback) {\n      this._onRemove.add(callback);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      for (var i in this.views) {\n        this.views[i].remove();\n      }\n\n      var onRemove = this._onRemove.items();\n\n      for (var _i6 in onRemove) {\n        this._onRemove.remove(onRemove[_i6]);\n\n        onRemove[_i6]();\n      }\n\n      var cleanup;\n\n      while (this.cleanup.length) {\n        cleanup = this.cleanup.pop();\n        cleanup();\n      }\n\n      this.views = [];\n\n      while (this.tag && this.tag.firstChild) {\n        this.tag.removeChild(this.tag.firstChild);\n      }\n\n      if (this.args.subArgs) {\n        _Bindable.Bindable.clearBindings(this.args.subArgs);\n      }\n\n      _Bindable.Bindable.clearBindings(this.args);\n\n      if (this.args.value && !this.args.value.isBound()) {\n        _Bindable.Bindable.clearBindings(this.args.value);\n      }\n    }\n  }]);\n\n  return ViewList;\n}();\n\nexports.ViewList = ViewList;\n  })();\n});","import { Bag  } from 'curvature/base/Bag';\nimport { View } from 'curvature/base/View';\n\nimport { Icon } from '../icon/Icon';\n\nexport class Desktop extends View\n{\n\tconstructor(args)\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = require('./desktop.tmp');\n\n\t\tthis.args.icons = [\n\t\t\tnew Icon({name: 'Icon Explorer', icon: 'shell_window4', 'path': 'w98', 'bits': 8})\n\t\t\t, new Icon({name: 'NynePad', icon: 60})\n\t\t];\n\n\t\tthis.windows = new Bag((win, meta, action, index)=>{\n\n\t\t\t// console.log(this.windows.list);\n\n\t\t});\n\n\t\tthis.args.windows = this.windows.list;\n\t}\n}\n","module.exports = \"<div data-role = \\\"icon-list\\\" cv-each = \\\"icons:icon:i\\\">[[icon]]</div>\\n\"","import { Bag  } from 'curvature/base/Bag';\nimport { View } from 'curvature/base/View';\n\nimport { Desktop  } from 'desktop/Desktop';\nimport { Window   } from 'window/Window';\nimport { Task     } from 'task/Task';\n\nexport class Home extends View\n{\n\tstatic singleton = false;\n\tstatic path      = {\n\t\t'/apps/icon-explorer': Task\n\t};\n\n\tstatic instance()\n\t{\n\t\tif(this.singleton)\n\t\t{\n\t\t\treturn this.singleton;\n\t\t}\n\n\t\treturn this.singleton = new this;\n\t}\n\n\tconstructor(args)\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = require('./home.tmp');\n\n\t\tthis.args.desktop = new Desktop({}, this);\n\n\t\tthis.windows = new Bag((i,s,a) => {\n\n\t\t\tif(a !== Bag.ITEM_ADDED)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ti.windows = this.windows;\n\t\t});\n\n\t\tthis.tasks   = new Bag();\n\n\t\t// this.windows.type = Window;\n\t\t// this.tasks.type   = Task;\n\n\t\tthis.args.windows = this.windows.list;\n\t\tthis.args.tasks   = this.tasks.list;\n\t}\n\n\trun(taskName)\n\t{\n\t\tconst taskType = Home.path[taskName] || false;\n\n\t\tif(!taskType)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst task = new taskType(this.tasks);\n\n\t\tthis.tasks.add(task);\n\t}\n}\n","module.exports = \"<div class = \\\"viewport\\\">\\n\\t<div data-role = \\\"window-host\\\" cv-each = \\\"windows:window:w\\\">[[window]]</div>\\n\\t<div class = \\\"desktop\\\">[[desktop]]</div>\\n</div>\\n\\n<div class = \\\"task-bar pane\\\">\\n\\t<div class = \\\"start\\\">\\n\\t\\t<button>\\n\\t\\t\\t<img class = \\\"icon16\\\" src = \\\"/w98/windows-16-4bit.png\\\" />\\n\\t\\t\\t<div>Start</div>\\n\\t\\t</button>\\n\\t\\t<div class = \\\"pane\\\">\\n\\t\\t\\t<div class = \\\"brand-stripe\\\">\\n\\t\\t\\t\\t<img src = \\\"/nynex95-logo.svg\\\">\\n\\t\\t\\t</div>\\n\\t\\t\\t<ul>\\n\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t<img src = \\\"/w95/20-32-4bit.png\\\" />\\n\\t\\t\\t\\t\\t<label tabindex = \\\"0\\\">Programs</label>\\n\\t\\t\\t\\t\\t<img class = \\\"expand\\\" src = \\\"/arrow-expand.png\\\" />\\n\\n\\t\\t\\t\\t\\t<ul class = \\\"pane\\\">\\n\\n\\t\\t\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t\\t\\tAccessories\\n\\t\\t\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t\\t\\tGames\\n\\t\\t\\t\\t\\t\\t\\t<ul class = \\\"pane\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<li tabindex = \\\"0\\\">Foo</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li tabindex = \\\"0\\\">Bar</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li tabindex = \\\"0\\\">Baz</li>\\n\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t\\t\\tStartup\\n\\t\\t\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t\\t</ul>\\n\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t<img src = \\\"/w95/21-32-4bit.png\\\" />\\n\\t\\t\\t\\t\\tDocuments\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t<img src = \\\"/w95/22-32-4bit.png\\\" />\\n\\t\\t\\t\\t\\tSettings\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t<img src = \\\"/w95/23-32-4bit.png\\\" />\\n\\t\\t\\t\\t\\tFind\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t<img src = \\\"/w95/24-32-4bit.png\\\" />\\n\\t\\t\\t\\t\\tHelp\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t<img src = \\\"/w95/25-32-4bit.png\\\" />\\n\\t\\t\\t\\t\\tRun...\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<hr />\\n\\n\\t\\t\\t\\t<li tabindex = \\\"0\\\">\\n\\t\\t\\t\\t\\t<img src = \\\"/w95/28-32-4bit.png\\\" />\\n\\t\\t\\t\\t\\tShutdown...\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</div>\\n\\t</div>\\n\\n\\t<div class = \\\"quickstart\\\">\\n\\t</div>\\n\\n\\t<div class = \\\"tasks\\\">\\n\\t</div>\\n\\n\\t<div class = \\\"tray\\\">\\n\\t</div>\\n</div>\\n\\n\\n<ul class = \\\"task-list\\\" cv-each = \\\"tasks:task:t\\\">\\n\\t<li>[[task.x]]x[[task.y]]x[[task.z]] [[task.title]]</li>\\n</ul>\\n\"","import { View } from 'curvature/base/View';\n\nimport { Home } from '../home/Home';\n\nexport class Icon extends View\n{\n\tconstructor(args, parent)\n\t{\n\t\tsuper(args, parent);\n\n\t\tthis.template  = require('./icon.tmp');\n\n\t\tthis.resource = args.action || '/apps/icon-explorer-stats'\n\t\tthis.action   = args.action || '/apps/icon-explorer'\n\n\t\tthis.args.name = args.name || `untitled`;\n\t\tthis.args.path = args.path || `w95`;\n\t\tthis.args.size = args.size || `32`;\n\t\tthis.args.bits = args.bits || `4`;\n\t\tthis.args.icon = args.icon || '3';\n\n\t\tthis.args.bindTo((v,k) => {\n\n\t\t\tif(undefined === ['path', 'size', 'bits', 'icon'].find(el => el === k))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst path = `/${this.args.path}/${this.args.icon}-${this.args.size}-${this.args.bits}bit.png`\n\n\t\t\tthis.args.src = path;\n\n\t\t}, {idle: 1});\n\t}\n\n\tdblclick(event)\n\t{\n\t\tconst home = Home.instance();\n\n\t\thome.run(this.action);\n\t}\n}\n","module.exports = \"<div cv-on = \\\":dblclick(event):c\\\" tabindex=\\\"0\\\">\\n\\t<img cv-attr = \\\"src:src\\\" />\\n\\t<label>[[name]]</label>\\n</div>\\n\"","import { Home }    from 'home/Home';\nimport { Window }  from 'window/Window';\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n\tconst tag  = document.querySelector('body');\n\n\tif(!tag)\n\t{\n\t\treturn;\n\t}\n\n\tconst homeView = Home.instance();\n\n\thomeView.render(tag);\n\n\tconst win = new Window({content: 'Window #0.'});\n\n\t// setTimeout(()=> homeView.windows.add(win), 1000);\n\n});\n","import { Mixin }    from 'curvature/base/Mixin';\nimport { Bindable } from 'curvature/base//Bindable';\n\nexport class CssSwitch extends Mixin\n{\n\tafter__constructor()\n\t{\n\t\tthis.classes = Bindable.makeBindable({pane:true, resize:true});\n\n\t\tthis.classes.bindTo(\n\t\t\t(v,k) => this.args.classes = Object.assign({}, this.classes)\n\t\t\t, {frame: 1}\n\t\t);\n\t}\n}\n","import { Mixin }    from 'curvature/base/Mixin';\nimport { Bindable } from 'curvature/base//Bindable';\n\nconst priv = Symbol('priv');\n\nexport class Sealed extends Mixin\n{\n\tbefore__constructor()\n\t{\n\t\tObject.seal(this);\n\t}\n}\n","import { Mixin }    from 'curvature/base/Mixin';\nimport { Bindable } from 'curvature/base//Bindable';\n\nconst target = Symbol('target');\n\nexport class Target extends Mixin\n{\n\tafter__constructor()\n\t{\n\t\tthis[target] = new EventTarget;\n\t}\n\n\tdispatchEvent(...args)\n\t{\n\t\tthis[target].dispatchEvent(...args);\n\t}\n\n\taddEventListener(...args)\n\t{\n\t\tthis[target].addEventListener(...args);\n\t}\n\n\tremoveEventListener(...args)\n\t{\n\t\tthis[target].removeEventListener(...args);\n\t}\n}\n","import { Mixin } from 'curvature/base/Mixin';\n\nexport class ViewProcessor extends Mixin\n{\n\tjoin(list)\n\t{\n\t\tif(!Array.isArray(list) && typeof list !== 'object')\n\t\t{\n\t\t\tlist = [list];\n\t\t}\n\t\telse if(!Array.isArray(list) && typeof list === 'object')\n\t\t{\n\t\t\tlist = Object.keys(list).filter((key)=>{\n\t\t\t\treturn list[key];\n\t\t\t});\n\t\t}\n\n\t\treturn list.join(' ');\n\t}\n}\n\n","import { Home   } from '../home/Home';\nimport { Sealed } from '../mixin/Sealed';\nimport { Window } from '../window/Window';\n\nlet win = undefined;\n\nexport class Task\n{\n\ttitle  = 'Application';\n\ticon   = '/w95/3-16-4bit.png';\n\tsilent = false;\n\tlist   = undefined;\n\n\tconstructor(taskList)\n\t{\n\t\tif(!this.silent)\n\t\t{\n\t\t\tconst home = Home.instance();\n\t\t\tconst win  = new Window(this);\n\n\t\t\twin.addEventListener('closed', () => taskList.remove(this));\n\n\t\t\thome.windows.add(win);\n\n\t\t\twin.focus();\n\t\t}\n\t}\n}\n","import { View } from 'curvature/base/View';\n\nexport class MenuBar extends View\n{\n\tconstructor(args, parent)\n\t{\n\t\tsuper(args, parent);\n\n\t\tthis.template = require('./menuBar.tmp');\n\t}\n}\n","import { View } from 'curvature/base/View';\n\n// import { ViewProcessor } from '../mixin/ViewProcessor';\n\nexport class TitleBar extends View\n{\n\tconstructor(args, parent)\n\t{\n\t\tsuper(args, parent);\n\n\t\tthis.template = require('./titleBar.tmp');\n\t}\n}\n","import { View     } from 'curvature/base/View';\nimport { Bindable } from 'curvature/base/Bindable';\nimport { MenuBar  } from './MenuBar';\nimport { TitleBar } from './TitleBar';\n\nimport { Target        } from '../mixin/Target';\nimport { CssSwitch     } from '../mixin/CssSwitch';\nimport { ViewProcessor } from '../mixin/ViewProcessor';\n\nimport { Icon } from '../icon/Icon';\n\nlet Base = class extends View\n{\n\tconstructor(args = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.init = Date.now();\n\n\t\tthis.args.classes = ['pane', 'resize'];\n\n\t\tthis.pos = Bindable.make({x: 160, y: 100, z: 0});\n\n\t\tthis.args.icon  = args.icon || '/w95/3-16-4bit.png';\n\t\tthis.args.title = Date.now() - this.init;\n\t\tthis.args.progr = 0;\n\n\t\tthis.template = require('./window.tmp');\n\t\tthis.args.icons = Array(72).fill(1).map((v, k) => {\n\n\t\t\treturn new Icon({icon: 1+k, name: 1+k})\n\n\t\t});\n\t}\n\n\tpostRender()\n\t{\n\t\tthis.args.titleBar = new TitleBar(this.args, this);\n\t\tthis.args.menuBar  = new MenuBar(this.args, this);\n\n\t\tconst element = this.tags.window.element;\n\n\t\tthis.pos.bindTo('x', (v,k) => {\n\t\t\telement.style.left = `${v}px`;\n\t\t\tthis.args.x = v;\n\t\t});\n\n\t\tthis.pos.bindTo('y', (v,k) => {\n\t\t\telement.style.top = `${v}px`;\n\t\t\tthis.args.y = v;\n\t\t});\n\n\t\tthis.pos.bindTo('z', (v,k) => {\n\t\t\telement.style.zIndex = v;\n\t\t\tthis.args.z = v;\n\t\t});\n\t}\n\n\tattached(parent)\n\t{\n\t\tthis.args.bindTo('title', v => this.args.content = v)\n\n\t\tthis.onFrame(()=>{\n\t\t\tconst age = Date.now() - this.init;\n\n\t\t\tthis.args.progr = ((age / 100) % 100).toFixed(2);\n\n\t\t\tthis.args.title = `age: ${(age / 1000).toFixed(1)}s`;\n\t\t});\n\n\t\tthis.dispatchEvent(new CustomEvent(\n\t\t\t'attached', {detail:{ parent, target:this }})\n\t\t);\n\t}\n\n\tmenuFocus()\n\t{\n\t\tthis.classes['menu-open'] = true;\n\t}\n\n\tmenuBlur()\n\t{\n\t\tthis.classes['menu-open'] = false;\n\t}\n\n\tminimize()\n\t{\n\t\tthis.classes.minimized = true;\n\t\tthis.classes.maximized = false;\n\n\t\tthis.dispatchEvent(new CustomEvent(\n\t\t\t'minimized', {detail:{ target:this }}\n\t\t));\n\t}\n\n\trestore()\n\t{\n\t\tthis.classes.minimized = false;\n\t\tthis.classes.maximized = false;\n\n\t\tthis.dispatchEvent(new CustomEvent(\n\t\t\t'restored', {detail:{ target:this }}\n\t\t));\n\t}\n\n\tmaximize()\n\t{\n\t\tthis.classes.minimized = false;\n\t\tthis.classes.maximized = true;\n\n\t\tthis.dispatchEvent(new CustomEvent(\n\t\t\t'maximized', {detail:{ target:this }}\n\t\t));\n\t}\n\n\tclose()\n\t{\n\t\t// this.remove();\n\t\tthis.windows.remove(this);\n\n\t\tthis.dispatchEvent(new CustomEvent(\n\t\t\t'closed', {detail:{ target:this }}\n\t\t));\n\t}\n\n\tfocus()\n\t{\n\t\tconst prevZ = this.pos.z;\n\n\t\tconst windows = this.windows.items();\n\n\t\tfor(const i in windows)\n\t\t{\n\t\t\tif(windows[i].pos.z > prevZ)\n\t\t\t{\n\t\t\t\twindows[i].pos.z--;\n\t\t\t}\n\t\t}\n\n\t\tthis.pos.z = windows.length;\n\t}\n\n\tgrabTitleBar(event)\n\t{\n\t\tconst start = { x: this.pos.x, y: this.pos.y};\n\t\tconst click = { x: event.clientX, y: event.clientY };\n\n\t\tconst moved = (event) => {\n\n\t\t\tconst mouse = { x: event.clientX, y: event.clientY };\n\t\t\tconst moved = { x: mouse.x - click.x, y: mouse.y - click.y };\n\n\t\t\tthis.pos.x = start.x + moved.x;\n\t\t\tthis.pos.y = start.y + moved.y;\n\t\t}\n\n\t\tdocument.addEventListener('mousemove', moved);\n\n\t\tdocument.addEventListener('mouseup', (event) => {\n\n\t\t\tdocument.removeEventListener('mousemove', moved);\n\n\t\t}, {once: true});\n\t}\n}\n\nBase = Target.mix(Base);\nBase = CssSwitch.mix(Base);\nBase = ViewProcessor.mix(Base);\n\nexport class Window extends Base{};\n","module.exports = \"<div class = \\\"menu-bar\\\" cv-on = \\\"blur:menuBlur(event):c;focus:menuFocus(event):c\\\">\\n\\n  <div tabindex = \\\"0\\\">\\n\\n    <u>F</u>ile\\n\\n    <ul class = \\\"pane\\\">\\n\\n      <li tabindex = \\\"0\\\">\\n        <u>N</u>ew\\n      </li>\\n\\n      <li tabindex = \\\"0\\\">\\n        <u>O</u>pen\\n      </li>\\n\\n      <li tabindex = \\\"0\\\">\\n        Open <u>R</u>ecent\\n\\n        <ul class = \\\"pane\\\">\\n          <li tabindex = \\\"0\\\">Foo</li>\\n          <li tabindex = \\\"0\\\">Bar</li>\\n          <li tabindex = \\\"0\\\">Baz</li>\\n        </ul>\\n\\n      </li>\\n\\n      <hr />\\n\\n      <li tabindex = \\\"0\\\">\\n        <u>P</u>lugins\\n\\n        <ul class = \\\"pane\\\">\\n          <li tabindex = \\\"0\\\">\\n            Foo\\n            <ul class = \\\"pane\\\">\\n              <li tabindex = \\\"0\\\">Settings</li>\\n              <hr />\\n              <li tabindex = \\\"0\\\">Start</li>\\n              <li tabindex = \\\"0\\\">Stop</li>\\n              <li tabindex = \\\"0\\\">Restart</li>\\n            </ul>\\n          </li>\\n          <li tabindex = \\\"0\\\">\\n            Bar\\n            <ul class = \\\"pane\\\">\\n              <li tabindex = \\\"0\\\">Settings</li>\\n              <hr />\\n              <li tabindex = \\\"0\\\">Start</li>\\n              <li tabindex = \\\"0\\\">Stop</li>\\n              <li tabindex = \\\"0\\\">Restart</li>\\n            </ul>\\n          </li>\\n          <li tabindex = \\\"0\\\">\\n            Baz\\n            <ul class = \\\"pane\\\">\\n              <li tabindex = \\\"0\\\">Settings</li>\\n              <hr />\\n              <li tabindex = \\\"0\\\">Start</li>\\n              <li tabindex = \\\"0\\\">Stop</li>\\n              <li tabindex = \\\"0\\\">Restart</li>\\n            </ul>\\n          </li>\\n        </ul>\\n\\n      </li>\\n\\n      <hr />\\n\\n      <li tabindex = \\\"0\\\">Save</li>\\n      <li tabindex = \\\"0\\\">Save As</li>\\n\\n      <hr />\\n\\n      <li tabindex = \\\"0\\\">Close</li>\\n      <li tabindex = \\\"0\\\">Quit</li>\\n\\n    </ul>\\n\\n  </div>\\n\\n  <div tabindex = \\\"0\\\">\\n\\n    <u>E</u>dit\\n\\n     <ul class = \\\"pane\\\">\\n      <li tabindex = \\\"0\\\">Undo</li>\\n      <li tabindex = \\\"0\\\">Redo</li>\\n      <hr />\\n      <li tabindex = \\\"0\\\">Cut</li>\\n      <li tabindex = \\\"0\\\">Copy</li>\\n      <li tabindex = \\\"0\\\">Paste</li>\\n      <li tabindex = \\\"0\\\">Delete</li>\\n      <hr />\\n      <li tabindex = \\\"0\\\">Find</li>\\n      <li tabindex = \\\"0\\\">Replace</li>\\n    </ul>\\n\\n  </div>\\n\\n  <div tabindex = \\\"0\\\">\\n    <u>V</u>iew\\n  </div>\\n\\n  <div tabindex = \\\"0\\\">\\n    <u>G</u>o\\n  </div>\\n\\n  <div tabindex = \\\"0\\\">\\n    F<u>a</u>vorites\\n  </div>\\n\\n  <div tabindex = \\\"0\\\">\\n    <u>H</u>elp\\n  </div>\\n</div>\\n\"","module.exports = \"<div class = \\\"title-bar\\\" cv-on = \\\"mousedown:grabTitleBar(event);\\\">\\n\\t<img cv-attr = \\\"src:icon\\\" />\\n\\t<span class = \\\"title\\\" cv-bind = \\\"title\\\"></span>\\n\\t<span>\\n\\t\\t<button tabindex = \\\"-1\\\" class = \\\"minimize\\\" cv-on = \\\"click:minimize(event)\\\"></button>\\n\\t\\t<button tabindex = \\\"-1\\\" class = \\\"restore\\\" cv-on = \\\"click:restore(event)\\\"></button>\\n\\t\\t<button tabindex = \\\"-1\\\" class = \\\"maximize\\\" cv-on = \\\"click:maximize(event)\\\"></button>\\n\\t\\t<button tabindex = \\\"-1\\\" class = \\\"close\\\" cv-on = \\\"click:close(event)\\\"></button>\\n\\t</span>\\n</div>\\n\"","module.exports = \"<div class = \\\"window [[classes|join]]\\\" cv-on = \\\"mousedown:focus(event):c\\\" cv-ref = \\\"window::\\\" tabindex=\\\"-1\\\">\\n\\t[[titleBar]]\\n\\t[[menuBar]]\\n\\t<div class = \\\"frame liquid\\\">\\n\\t\\t<div class = \\\"row\\\">\\n\\t\\t\\t<label class = \\\"inset\\\">[[content]]</label>\\n\\t\\t</div>\\n\\t\\t<div class = \\\"row\\\">\\n\\t\\t\\t<label>\\n\\t\\t\\t\\t[[progr]]%\\n\\t\\t\\t</label>\\n\\t\\t\\t<progress  class = \\\"inset\\\" value=\\\"[[progr]]\\\" max=\\\"100\\\">\\n\\t\\t</div>\\n\\t\\t<div class = \\\"frame white inset scroll margin\\\">\\n\\t\\t\\t<div data-role = \\\"icon-list\\\" cv-each = \\\"icons:iicon:i\\\">[[iicon]]</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\"","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}